import{d as O,z as W,r as k,o as j,j as w,k as d,m as a,P as G,am as T,af as H,s as t,l as r,an as J,u as o,x as i,I as m,M as f,B as K,q as Q,L as X,a7 as Y,e as g,f as Z,a5 as ee,h as n,t as p,N as le,a8 as ae}from"./vendor-CvgTi-PR.js";import{b as te,a as oe,_ as ne}from"./xl-actor-create-SFkdUGJO.js";import{a as se,u as re,$ as ue,R as de,t as pe,_ as ce}from"./index-BH15UgwX.js";const _e={class:"flex flex-column grid-gap-4",style:{"--el-color-primary":"var(--el-color-success)"}},ie={class:"grid-columns-8 grid-gap-4"},me=["onClick"],fe={class:"flex-1 flex flex-column grid-gap-2"},ge={class:"flex grid-gap-2"},ve={class:"bg h10 rounded-2 py-1 px-2"},be={class:"bg h10 rounded-2 py-1 px-2"},xe={class:"bg h10 rounded-2 py-1 px-2"},ye=O({__name:"index",props:{query:{default:()=>({})},types:{default:()=>[]}},emits:["select"],setup(I,{emit:B}){const v=I,N=se(),{WEBCONFIG:x}=re(N),U=B,s=W({type:"all",name:"",species_type:"",gender:"",age:""}),y=k([]),h=k(!1),u=()=>{h.value=!0,y.value=[],ue.get("/app/shortplay/api/Actor/index",{params:{...s,...v.query}}).then(c=>{c.code===de.SUCCESS&&(y.value=c.data)}).finally(()=>{h.value=!1})},q=c=>{U("select",c)},S=k(null);return j(()=>{u()}),(c,l)=>{const b=oe,A=te,_=J,L=w("Search"),E=Q,R=K,C=le,V=X,F=T,$=w("Plus"),z=ae,M=ee,P=ne,D=Y;return n(),d("div",_e,[a(F,{class:"flex flex-center grid-gap-4",onSubmit:H(u,["prevent"])},{default:t(()=>[a(_,{class:"mb-0"},{default:t(()=>[a(A,{modelValue:o(s).type,"onUpdate:modelValue":l[0]||(l[0]=e=>o(s).type=e),class:"text-info",onChange:u},{default:t(()=>[a(b,{value:"all"},{default:t(()=>[...l[6]||(l[6]=[i("全部",-1)])]),_:1}),a(b,{value:"public"},{default:t(()=>[...l[7]||(l[7]=[i("公共",-1)])]),_:1}),a(b,{value:"personal"},{default:t(()=>[...l[8]||(l[8]=[i("个人",-1)])]),_:1}),(n(!0),d(m,null,f(v.types,e=>(n(),g(b,{key:e.value,value:e.value},{default:t(()=>[i(p(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l[9]||(l[9]=r("div",{class:"flex-1"},null,-1)),a(_,{class:"mb-0"},{default:t(()=>[a(R,{modelValue:o(s).name,"onUpdate:modelValue":l[1]||(l[1]=e=>o(s).name=e),placeholder:"搜索演员",clearable:"",onChange:u},{suffix:t(()=>[a(E,null,{default:t(()=>[a(L)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(_,{class:"mb-0",style:{width:"80px"}},{default:t(()=>[a(V,{modelValue:o(s).species_type,"onUpdate:modelValue":l[2]||(l[2]=e=>o(s).species_type=e),placeholder:"物种",clearable:"",teleported:!1,onChange:u},{default:t(()=>[(n(!0),d(m,null,f(o(x)?.enum?.actor_species_type,e=>(n(),g(C,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(_,{class:"mb-0",style:{width:"80px"}},{default:t(()=>[a(V,{modelValue:o(s).gender,"onUpdate:modelValue":l[3]||(l[3]=e=>o(s).gender=e),placeholder:"性别",clearable:"",teleported:!1,onChange:u},{default:t(()=>[(n(!0),d(m,null,f(o(x)?.enum?.actor_gender,e=>(n(),g(C,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(_,{class:"mb-0",style:{width:"80px"}},{default:t(()=>[a(V,{modelValue:o(s).age,"onUpdate:modelValue":l[4]||(l[4]=e=>o(s).age=e),placeholder:"年龄",clearable:"",teleported:!1,onChange:u},{default:t(()=>[(n(!0),d(m,null,f(o(x)?.enum?.actor_age,e=>(n(),g(C,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),G((n(),g(M,{height:"300px"},{default:t(()=>[r("div",ie,[o(s).type!=="public"?(n(),d("div",{key:0,class:"grid-column-2 rounded-4 p-4 border-1 border-dashed actor-item flex flex-center grid-gap-4",onClick:l[5]||(l[5]=e=>o(S)?.open?.(null,v.query?.drama_id,v.query?.episode_id))},[a(E,{class:"rounded-4",size:"20",style:{height:"40px",width:"40px","background-color":"var(--el-mask-color-extra-light)"}},{default:t(()=>[a($)]),_:1}),l[10]||(l[10]=r("span",null,"添加演员",-1))])):Z("",!0),(n(!0),d(m,null,f(o(y),e=>(n(),d("div",{class:"grid-column-2 input-button rounded-4 p-4 flex flex-center grid-gap-2 actor-item actor-item-b",onClick:he=>q(e)},[a(z,{src:e.headimg,size:40},{default:t(()=>[i(p(o(pe)(e.name,1)),1)]),_:2},1032,["src"]),r("div",fe,[r("span",null,p(e.name),1),r("div",ge,[r("span",ve,p(e.species_type_enum?.label),1),r("span",be,p(e.gender_enum?.label),1),r("span",xe,p(e.age_enum?.label),1)])])],8,me))),256))])]),_:1})),[[D,o(h)]]),a(P,{ref_key:"actorCreateRef",ref:S,onSuccess:u,"append-to-body":""},null,512)])}}}),Se=ce(ye,[["__scopeId","data-v-5ac32af7"]]);export{Se as _};
