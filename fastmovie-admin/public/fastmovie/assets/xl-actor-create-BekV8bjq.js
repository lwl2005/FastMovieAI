import{d as ue,r as c,w as re,o as ze,O as E,aw as Fe,k as r,n as We,af as Te,h as n,aP as Q,aQ as le,H as Je,p as ce,j as H,m as s,S as Ee,u as l,J as xe,s as i,l as o,P as Oe,x as G,a6 as Ke,e as f,I as C,M as X,C as Ue,E as N,a4 as Qe,a7 as Ae,t as T,ae as be,f as ae,q as Pe,z as Se,ak as Xe,aj as Ye,B as Ze,L as el,K as ll,ah as al,ab as sl,g as ol,N as tl}from"./vendor-t8h0TCfL.js";import{_ as _e,$ as D,R as de,t as il,a as nl,u as dl}from"./index-B0RNcuq8.js";import{_ as qe,u as rl,I as Re,a as $e}from"./usePoints-C21LjXJs.js";import{I as cl}from"./icon-points-01HE_Clx.js";import{I as ul,a as _l,b as pl}from"./icon-image-BfHAjLRU.js";const ml=ue({__name:"index",props:{modelValue:{default:""},dotWidth:{default:20},color:{default:"var(--el-color-success)"}},emits:["update:modelValue","change"],setup(L,{emit:F}){const U=L,m=F,g=c(U.modelValue),V=c([]),y=new Map,e=c(0),w=c(U.dotWidth),I=c(null);let x=null;re(g,_=>{m("change",_)});const S=_=>{g.value!==_&&(g.value=_,m("update:modelValue",_),E(R))},R=_=>{if(typeof window>"u")return;const h=_??y.get(g.value)??null;if(!h)return;const{offsetWidth:z,offsetLeft:A}=h;if(z===0){x!==null&&window.cancelAnimationFrame(x),x=window.requestAnimationFrame(()=>{x=null,R(h)});return}e.value=A+z/2-w.value/2},Y=(_,h)=>{V.value.includes(_)||V.value.push(_),y.set(_,h),_===g.value&&E(()=>R(h))},$=_=>{const h=V.value.indexOf(_);if(h!==-1&&V.value.splice(h,1),y.delete(_),g.value===_){const z=V.value[0];z!==void 0&&(g.value=z,E(R))}};return re(()=>U.modelValue,_=>{g.value!==_&&(g.value=_,E(R))}),ze(()=>{E(R)}),Fe(()=>{x!==null&&(window.cancelAnimationFrame(x),x=null)}),Q("tabs",V),Q("activeTab",g),Q("setActiveTab",S),Q("registerTab",Y),Q("unregisterTab",$),Q("updateIndicator",R),(_,h)=>(n(),r("div",{class:"xl-tabs",style:We({"--xl-tabs-dot-left":`${e.value}px`,"--xl-tabs-dot-width":`${w.value}px`,"--xl-tabs-selected-color":L.color,"--xl-tabs-dot-bg-color":L.color}),ref_key:"containerRef",ref:I},[Te(_.$slots,"default",{activeTab:g.value},void 0,!0)],4))}}),gl=_e(ml,[["__scopeId","data-v-4748c965"]]),vl=ue({__name:"index",props:{value:{type:[String,Number],required:!0}},setup(L){const F=L,U=le("activeTab",void 0),m=le("setActiveTab",void 0),g=le("registerTab",void 0),V=le("unregisterTab",void 0),y=le("updateIndicator",void 0),e=c(null);ze(()=>{E(()=>g?.(F.value,e.value))}),Fe(()=>{V?.(F.value)});const w=Je(()=>U?.value===F.value);re(w,x=>{x&&E(()=>y?.(e.value))});const I=()=>{m?.(F.value)};return(x,S)=>(n(),r("div",{class:ce(["xl-tabs-item",{"xl-tabs-item-selected":w.value}]),onClick:I,ref_key:"itemRef",ref:e},[Te(x.$slots,"default",{},void 0,!0)],2))}}),fl=_e(vl,[["__scopeId","data-v-b013e896"]]),hl={class:"voice-page"},xl={class:"flex grid-gap-4"},bl={class:"flex flex-column grid-gap-4",style:{width:"300px"}},yl={class:"flex-1 flex flex-column grid-gap-4"},kl={class:"grid-columns-3 grid-gap-4"},wl=["onClick"],Vl={class:"w-100 flex grid-gap-2 flex-center"},Cl={class:"flex-1 flex flex-column grid-gap-2"},Il={class:"flex grid-gap-2"},Sl={class:"bg h10 rounded-2 py-1 px-2"},Rl={class:"bg h10 rounded-2 py-1 px-2"},$l={class:"flex-1 flex flex-column grid-gap-2"},zl={class:"flex grid-gap-2 flex-wrap"},Fl=["onClick"],Tl={key:0,class:"flex grid-gap-2 flex-wrap"},El={key:1,class:"text-secondary h10"},Ul=ue({__name:"index",emits:["success"],setup(L,{expose:F,emit:U}){const m=c({model_id:"",voice_id:"",voice_channel:"yidevs"});re(()=>m.value.voice_channel,(p,d)=>{console.log(p,d)});const g=c(!1),V=U,y=c(""),e=p=>{y.value=p.modelScene,p.voice&&($.value=p.voice,m.value.voice_id=p.voice.voice_id,m.value.voice_channel=p.voice.voice_channel,m.value.model_id=p.voice.model_id),E(()=>{g.value=!0})},w=()=>{m.value={model_id:"",voice_id:"",voice_channel:"yidevs"},g.value=!1},I=c([]),x=c(!1),S=()=>{I.value=[],!(!m.value.model_id||!m.value.voice_channel)&&(x.value=!0,D.get("/app/shortplay/api/Voice/list",{params:{model_id:m.value.model_id,action:m.value.voice_channel,scene:y.value}}).then(p=>{p.code===de.SUCCESS&&(I.value=p.data)}).catch(()=>{N.error("获取配音列表失败")}).finally(()=>{x.value=!1}))},R=p=>{m.value.model_id=p.id,m.value.voice_id="",S()},Y=p=>{if(!p)return;new Audio(p).play()},$=c(),_=p=>{$.value=p,m.value.voice_id=p.voice_id},h=c(!1),z=()=>{V("success",{...$.value,voice_channel:m.value.voice_channel,model_id:m.value.model_id}),w()},A=()=>{h.value||w()};return F({open:e,close:w}),(p,d)=>{const Z=qe,j=fl,se=gl,oe=Ae,P=H("Headset"),te=Pe,ie=Qe,ee=Ue,q=Ee,ne=Ke;return n(),r("div",hl,[s(q,{modelValue:l(g),"onUpdate:modelValue":d[2]||(d[2]=v=>xe(g)?g.value=v:null),class:"generate-scene-dialog",draggable:"","close-on-press-escape":!1,"append-to-body":"","destroy-on-close":"","close-on-click-modal":!1,"before-close":A,width:"min(100%,1000px)"},{header:i(()=>[...d[3]||(d[3]=[o("span",{class:"font-weight-600"},"配音",-1)])]),footer:i(()=>[s(ee,{bg:"",text:"",onClick:w,disabled:l(h)},{default:i(()=>[...d[8]||(d[8]=[G("取消",-1)])]),_:1},8,["disabled"]),d[10]||(d[10]=o("div",{class:"flex-1"},null,-1)),s(ee,{type:"success",onClick:z,loading:l(h)},{default:i(()=>[...d[9]||(d[9]=[G("确定",-1)])]),_:1},8,["loading"])]),default:i(()=>[o("div",xl,[o("div",bl,[s(Z,{modelValue:l(m).model_id,"onUpdate:modelValue":d[0]||(d[0]=v=>l(m).model_id=v),scene:l(y),scrollProps:{height:"320px"},onSelect:R},null,8,["modelValue","scene"])]),o("div",yl,[s(se,{modelValue:l(m).voice_channel,"onUpdate:modelValue":d[1]||(d[1]=v=>l(m).voice_channel=v),class:"text-info",onChange:S},{default:i(()=>[s(j,{value:"yidevs",class:"pb-2"},{default:i(()=>[...d[4]||(d[4]=[G("公共音色",-1)])]),_:1}),s(j,{value:"self",class:"pb-2"},{default:i(()=>[...d[5]||(d[5]=[G("我的音色",-1)])]),_:1})]),_:1},8,["modelValue"]),Oe((n(),f(ie,{height:"max(450px,50vh)"},{default:i(()=>[o("div",kl,[(n(!0),r(C,null,X(l(I),v=>(n(),r("div",{class:ce(["grid-column-1 input-button rounded-4 p-4 flex flex-column grid-gap-4 actor-item actor-item-b",{"actor-item-selected":l($)?.voice_id===v.voice_id}]),key:v.id,onClick:k=>_(v)},[o("div",Vl,[s(oe,{src:v.headimg,size:60,shape:"square"},{default:i(()=>[G(T(l(il)(v.name,1)),1)]),_:2},1032,["src"]),o("div",Cl,[o("span",null,T(v.name),1),o("div",Il,[o("span",Sl,T(v.gender_enum.label),1),o("span",Rl,T(v.age_enum.label),1)])])]),o("div",$l,[d[6]||(d[6]=o("span",null,"支持语言：",-1)),o("div",zl,[(n(!0),r(C,null,X(v.language_enum,k=>(n(),r("span",{key:k.value,class:"bg h10 rounded-2 py-1 px-2 flex grid-gap-2 flex-center",onClick:be(pe=>Y(v.audios?.[k.value]),["stop"])},[v.audios?.[k.value]?(n(),f(te,{key:0},{default:i(()=>[s(P)]),_:1})):ae("",!0),o("span",null,T(k.label),1)],8,Fl))),128))]),d[7]||(d[7]=o("span",null,"支持情绪：",-1)),v.emotions_enum.length>0?(n(),r("div",Tl,[(n(!0),r(C,null,X(v.emotions_enum,k=>(n(),r("span",{key:k.value,class:"bg h10 rounded-2 py-1 px-2"},T(k.label),1))),128))])):(n(),r("span",El,"暂无支持情绪"))])],10,wl))),128))])]),_:1})),[[ne,l(x)]])])])]),_:1},8,["modelValue"])])}}}),Al=_e(Ul,[["__scopeId","data-v-da735eca"]]),Pl={key:0,class:"font-weight-600"},ql={key:1,class:"font-weight-600"},Dl={key:2,class:"font-weight-600"},Ml={class:"flex grid-gap-4 flex-y-flex-start"},Ll={key:0,class:"flex-1 grid-columns-6 grid-gap-4"},Bl={key:0},Hl={key:1},Nl={class:"flex flex-column grid-gap-4 w-100"},Gl={class:"bg-overlay rounded-4 p-4 w-100"},jl={key:0,class:"flex flex-y-center grid-gap-2 line-height-1 mt-4"},Wl={class:"h10 text-ellipsis-1",style:{"max-width":"60px"}},Jl={class:"h10 text-ellipsis-1",style:{"max-width":"60px"}},Ol={class:"bg rounded-round p-3 flex flex-center grid-gap-2 pointer hover-bg-hover"},Kl={class:"flex flex-center grid-gap-2"},Ql={class:"h10 text-nowrap"},Xl={key:1,class:"flex flex-column grid-gap-4 p-4 bg-overlay rounded-4"},Yl={key:0,class:"flex flex-column flex-center grid-gap-2"},Zl={class:"flex flex-center grid-gap-2 h10"},ea={class:"rounded-round p-1 flex flex-center grid-gap-2",style:{"background-color":"#FFFFFF",color:"#141414"}},la={key:1,class:"flex flex-column flex-center grid-gap-2"},aa={key:2,class:"flex flex-column grid-gap-4 bg-overlay rounded-4 p-4"},sa={class:"flex flex-center grid-gap-4"},oa={class:"flex flex-center grid-gap-2 w-100"},ta=ue({__name:"xl-actor-create",emits:["success"],setup(L,{expose:F,emit:U}){const m=nl(),{WEBCONFIG:g}=dl(m),V=U,y=c(!1),e=Se({id:"",drama_id:"",episode_id:"",image_state:!1,image_model_id:"",three_view_image_state:!1,three_view_model_id:"",status_enum:{value:"initializing",label:"待初始化"},name:"",headimg:"",three_view_image:"",species_type:"",gender:"",age:"",remarks:"",image_reference_state:!1,reference_headimg:"",voice_channel:null,voice_id:null,voice_name:null,voice_model_id:null}),w=c(null),I=c(!1),x=Se({image_model_id:[{required:!0,message:"请选择图片模型",trigger:"change"}],three_view_model_id:[{required:!0,message:"请选择三维模型",trigger:"change"}],species_type:[{required:!0,message:"请选择物种",trigger:"change"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],age:[{required:!0,message:"请选择年龄",trigger:"change"}],remarks:[{required:!0,message:"请输入备注",trigger:"change"}]}),S=c(!1),R=(t,a,M)=>{S.value=!0,B.value="remarks",y.value=!0,E(()=>{t?(e.id=t.id,e.headimg=t.headimg,e.three_view_image=t.three_view_image,e.name=t.name,e.species_type=t.species_type,e.gender=t.gender,e.age=t.age,e.remarks=t.remarks,e.voice_channel=t.voice_channel,e.voice_id=t.voice_id,e.voice_name=t.voice_name,e.voice_model_id=t.voice_model_id,e.drama_id=a,e.episode_id=M):(e.drama_id=a,e.episode_id=M)})},Y=(t,a,M)=>{S.value=!1,B.value="upload",y.value=!0,E(()=>{t?(e.id=t.id,e.headimg=t.headimg,e.three_view_image=t.three_view_image,e.name=t.name,e.species_type=t.species_type,e.gender=t.gender,e.age=t.age,e.remarks=t.remarks,e.voice_channel=t.voice_channel,e.voice_id=t.voice_id,e.voice_name=t.voice_name,e.voice_model_id=t.voice_model_id,e.drama_id=a,e.episode_id=M):(e.drama_id=a,e.episode_id=M)})},$=()=>{w.value?.resetFields(),y.value=!1,e.id="",e.name="",e.species_type="",e.gender="",e.age="",e.remarks="",e.image_model_state=!1,e.image_model_id="",e.three_view_model_state=!1,e.three_view_model_id="",e.status_enum={value:"initializing",label:"待初始化"},e.headimg="",e.three_view_image="",e.drama_id="",e.episode_id="",e.voice_channel=null,e.voice_id=null,e.voice_name=null,e.voice_model_id=null},_=t=>{D.post("/app/shortplay/api/Actor/update",e).then(a=>{a.code===de.SUCCESS?(N.success(a.msg),e.id=a.data.id,V("success"),t?t():$()):N.error(a.msg)}).catch(()=>{N.error("更新失败")})},h=c(null),z=c(null),A=c(!1),p=c(!1),d=c(!1),Z=t=>{if(t.code===de.SUCCESS)switch(t.data.dir_name){case"actor/image":A.value=!1,e.headimg=t.data.url,h.value?.clearFiles();break;case"actor/three_view":p.value=!1,e.three_view_image=t.data.url,h.value?.clearFiles();break;case"actor/reference":d.value=!1,e.image_reference_state=!0,e.reference_headimg=t.data.url,z.value?.clearFiles();break}else N.error(t.msg)},j=()=>{h.value?.clearFiles(),z.value?.clearFiles()},se=c(),oe=c(),P=c({}),te=t=>{t?(e.image_model_id=t.id,e.image_state=!0,P.value=t):(e.image_model_id="",e.image_state=!1,P.value={}),oe.value?.hide()},ie=c(),ee=c(),q=c({}),ne=t=>{t?(e.three_view_model_id=t.id,q.value=t,e.three_view_image_state=!0):(e.three_view_model_id="",q.value={},e.three_view_image_state=!1),ee.value?.hide()},v=rl([P,q]),k=c(!1),pe=()=>{if(!(k.value||e.status_enum.value==="pending")){if(!e.id)return _(pe);k.value=!0,D.post("/app/shortplay/api/Actor/initializing",e).then(t=>{t.code===de.SUCCESS?(e.status=t.data.status,e.status_enum=t.data.status_enum):N.error(t.msg)}).catch(()=>{N.error("生成图片失败")}).finally(()=>{k.value=!1})}},De=(t,a)=>{t==="generateactorimage"?a.id===e.id&&(e.status_enum=a.status,a.image?e.headimg=a.image:k.value=!1):t==="generateactorthreeviewimage"&&a.id===e.id&&(e.status_enum=a.status,a.image?e.three_view_image=a.image:k.value=!1)},B=c("remarks"),W=c("headimg"),ye=c(),Me=t=>{e.voice_channel=t.voice_channel,e.voice_id=t.voice_id,e.voice_name=t.name,e.voice_model_id=t.model_id};return F({open:R,upload:Y,close:$,subscribe:De}),(t,a)=>{const M=Ze,J=Ye,me=Ue,ge=tl,ve=el,Le=ll,O=Ae,ke=H("Close"),b=Pe,we=H("ArrowDown"),K=H("Loading"),Be=H("Plus"),He=H("PictureRounded"),fe=sl,he=al,Ve=H("Top"),Ce=ol,Ne=Xe,Ge=Ee,Ie=qe,je=Al;return n(),r("div",null,[s(Ge,{modelValue:l(y),"onUpdate:modelValue":a[12]||(a[12]=u=>xe(y)?y.value=u:null),class:"generate-scene-dialog",draggable:"",width:l(S)?"min(100%,840px)":"min(100%,420px)","append-to-body":"",onClose:$},{header:i(()=>[l(S)?l(e).id?(n(),r("span",Dl,"编辑演员")):(n(),r("span",ql,"创建演员")):(n(),r("span",Pl,"上传演员"))]),footer:i(()=>[o("div",oa,[s(me,{type:"info",onClick:$,disabled:l(I)},{default:i(()=>[...a[28]||(a[28]=[G("取消",-1)])]),_:1},8,["disabled"]),a[30]||(a[30]=o("div",{class:"flex-1"},null,-1)),s(me,{type:"success",onClick:a[11]||(a[11]=u=>_()),disabled:l(I),loading:l(I)},{default:i(()=>[...a[29]||(a[29]=[G("提交",-1)])]),_:1},8,["disabled","loading"])])]),default:i(()=>[s(Ne,{"label-position":"top",model:l(e),rules:l(x),ref_key:"actorFormRef",ref:w,class:"actor-form",disabled:l(e).status_enum.value!=="initializing"},{default:i(()=>[o("div",Ml,[l(S)?(n(),r("div",Ll,[s(J,{label:"演员名称",prop:"title",class:"grid-column-3"},{default:i(()=>[s(M,{modelValue:l(e).name,"onUpdate:modelValue":a[0]||(a[0]=u=>l(e).name=u),placeholder:"请输入演员名称",class:"actor-form-input bg-overlay"},null,8,["modelValue"])]),_:1}),s(J,{label:"演员音色",prop:"title",class:"grid-column-3"},{default:i(()=>[s(me,{text:"",bg:"",onClick:a[1]||(a[1]=u=>l(ye)?.open?.({modelScene:"dialogue_voice",actor:l(e)}))},{default:i(()=>[l(e).voice_name?(n(),r("span",Bl,"音色:"+T(l(e).voice_name),1)):(n(),r("span",Hl,"点击选择音色"))]),_:1})]),_:1}),s(J,{label:"物种",prop:"title",class:"grid-column-2"},{default:i(()=>[s(ve,{modelValue:l(e).species_type,"onUpdate:modelValue":a[2]||(a[2]=u=>l(e).species_type=u),placeholder:"请选择物种",teleported:!1,class:"actor-form-select"},{default:i(()=>[(n(!0),r(C,null,X(l(g)?.enum?.actor_species_type,u=>(n(),f(ge,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(J,{label:"性别",prop:"title",class:"grid-column-2"},{default:i(()=>[s(ve,{modelValue:l(e).gender,"onUpdate:modelValue":a[3]||(a[3]=u=>l(e).gender=u),placeholder:"请选择性别",teleported:!1,class:"actor-form-select"},{default:i(()=>[(n(!0),r(C,null,X(l(g)?.enum?.actor_gender,u=>(n(),f(ge,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(J,{label:"年龄",prop:"title",class:"grid-column-2"},{default:i(()=>[s(ve,{modelValue:l(e).age,"onUpdate:modelValue":a[4]||(a[4]=u=>l(e).age=u),placeholder:"请选择年龄",teleported:!1,class:"actor-form-select"},{default:i(()=>[(n(!0),r(C,null,X(l(g)?.enum?.actor_age,u=>(n(),f(ge,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(J,{label:"演员形象",class:"grid-column-6"},{default:i(()=>[o("div",Nl,[s(Le,{modelValue:l(B),"onUpdate:modelValue":a[5]||(a[5]=u=>xe(B)?B.value=u:null),class:"tabs-segmented",options:[{label:"文本生成",value:"remarks"},{label:"本地上传",value:"upload"}]},null,8,["modelValue"]),o("div",Gl,[s(M,{modelValue:l(e).remarks,"onUpdate:modelValue":a[6]||(a[6]=u=>l(e).remarks=u),placeholder:"请输入角色描述",size:"small",class:"actor-form-textarea",type:"textarea",autosize:{minRows:6,maxRows:20}},null,8,["modelValue"]),l(B)==="remarks"?(n(),r("div",jl,[o("div",{class:"bg rounded-round p-3 flex flex-center grid-gap-2 pointer hover-bg-hover",ref_key:"actorHeadimgButtonRef",ref:se,title:"选择使用AI生成形象图"},[l(P).id?(n(),r(C,{key:0},[s(O,{src:l(P).icon,alt:l(P).name,shape:"square",size:16},null,8,["src","alt"]),o("span",Wl,T(l(P).name),1),s(b,{size:"16",class:"pointer",onClick:a[7]||(a[7]=be(u=>te(),["stop"]))},{default:i(()=>[s(ke)]),_:1})],64)):(n(),r(C,{key:1},[s(b,{size:"16"},{default:i(()=>[s(Re)]),_:1}),a[13]||(a[13]=o("span",{class:"h10 overflow-hidden text-nowrap",style:{"max-width":"60px"}},"形象图",-1)),s(b,{size:"16"},{default:i(()=>[s(we)]),_:1})],64))],512),o("div",{class:"bg rounded-round p-3 flex flex-center grid-gap-2 pointer hover-bg-hover",ref_key:"actorThreeViewModelButtonRef",ref:ie,title:"选择使用AI生成三视图"},[l(q).id?(n(),r(C,{key:0},[s(O,{src:l(q).icon,alt:l(q).name,shape:"square",size:16},null,8,["src","alt"]),o("span",Jl,T(l(q).name),1),s(b,{size:"16",class:"pointer",onClick:a[8]||(a[8]=be(u=>ne(),["stop"]))},{default:i(()=>[s(ke)]),_:1})],64)):(n(),r(C,{key:1},[s(b,{size:"16"},{default:i(()=>[s(Re)]),_:1}),a[14]||(a[14]=o("span",{class:"h10 overflow-hidden text-nowrap",style:{"max-width":"60px"}},"三视图",-1)),s(b,{size:"16"},{default:i(()=>[s(we)]),_:1})],64))],512),s(he,{ref_key:"uploadReferenceImageRef",ref:z,title:"添加参考图",data:{dir_name:"actor/reference",dir_title:"演员形象参考照片"},action:l(D).getCompleteUrl("app/shortplay/api/Uploads/upload"),headers:l(D).getHeaders(),accept:"image/jpeg,image/png",limit:1,type:"cover",disabled:l(d),"before-upload":()=>(d.value=!0,!0),"on-success":Z,"show-file-list":!1,"on-error":()=>{d.value=!1,j()}},{default:i(()=>[o("div",Ol,[s(fe,{placement:"top",disabled:!l(e).reference_headimg,width:"fit-content"},{reference:i(()=>[!l(e).reference_headimg||l(d)?(n(),f(b,{key:0,size:"16"},{default:i(()=>[l(d)?(n(),f(K,{key:0,class:"circular"})):(n(),f(Be,{key:1}))]),_:1})):(n(),f(b,{key:1,size:"16",color:"var(--el-color-success)"},{default:i(()=>[s(He)]),_:1}))]),default:i(()=>[s(O,{src:l(e).reference_headimg,fit:"contain",size:130,shape:"square"},null,8,["src"])]),_:1},8,["disabled"])])]),_:1},8,["action","headers","disabled","before-upload","on-error"]),a[15]||(a[15]=o("div",{class:"flex-1"},null,-1)),o("div",Kl,[s(b,{size:"16"},{default:i(()=>[s(cl)]),_:1}),o("span",Ql,T(l(v)),1)]),o("div",{class:"rounded-round p-3 flex flex-center grid-gap-2 pointer",style:{"background-color":"#FFFFFF",color:"#141414"},onClick:pe},[s(b,{size:"20"},{default:i(()=>[l(k)||l(e).status_enum.value==="pending"?(n(),f(K,{key:0,class:"circular"})):(n(),f(Ve,{key:1}))]),_:1})])])):ae("",!0)])])]),_:1})])):ae("",!0),l(B)==="remarks"?(n(),r("div",Xl,[s(O,{src:l(e).headimg,shape:"square",size:360,style:{"--el-avatar-bg-color":"var(--el-bg-color-overlay)"}},{default:i(()=>[l(e).status_enum.value==="initializing"?(n(),r("div",Yl,[s(b,{size:"64"},{default:i(()=>[l(k)?(n(),f(K,{key:0,class:"circular"})):(n(),f(ul,{key:1}))]),_:1}),a[18]||(a[18]=o("span",{class:"h10"},"填写左侧表单，使用AI生成演员形象图",-1)),o("div",Zl,[a[16]||(a[16]=o("span",null,"点击“",-1)),o("div",ea,[s(b,{size:"14"},{default:i(()=>[s(Ve)]),_:1})]),a[17]||(a[17]=o("span",null,"”按钮生成",-1))])])):l(e).status_enum.value==="pending"?(n(),r("div",la,[s(b,{size:"64"},{default:i(()=>[s(K,{class:"circular"})]),_:1}),a[19]||(a[19]=o("span",{class:"h10"},"生成中...",-1))])):ae("",!0)]),_:1},8,["src"])])):(n(),r("div",aa,[o("div",null,[l(W)==="headimg"?(n(),f(he,{key:0,ref_key:"uploadImageRef",ref:h,class:"input-upload rounded-4",drag:"",data:{dir_name:"actor/image",dir_title:"演员形象照片"},action:l(D).getCompleteUrl("app/shortplay/api/Uploads/upload"),headers:l(D).getHeaders(),accept:"image/jpeg,image/png",limit:1,type:"cover",disabled:l(A),"before-upload":()=>(A.value=!0,!0),"on-success":Z,"show-file-list":!1,"on-error":()=>{A.value=!1,j()}},{default:i(()=>[l(e).headimg?(n(),f(Ce,{key:1,src:l(e).headimg,class:"image-cover",fit:"contain"},null,8,["src"])):(n(),r(C,{key:0},[s(b,{class:"el-icon--upload"},{default:i(()=>[s($e)]),_:1}),a[20]||(a[20]=o("div",{class:"el-upload__text"},[o("span",{class:"h10"},"拖拽演员形象照片到此处或"),o("span",{class:"h10"},"点击上传")],-1)),a[21]||(a[21]=o("div",{class:"el-upload__text"},[o("span",{class:"h10"},"支持上传格式："),o("span",{class:"h10"},"PNG, JPG, JPEG")],-1)),a[22]||(a[22]=o("div",{class:"el-upload__text"},[o("span",{class:"h10"},"形象照片建议比例："),o("span",{class:"h10"},"1:1")],-1))],64))]),_:1},8,["action","headers","disabled","before-upload","on-error"])):l(W)==="three_view"?(n(),f(he,{key:1,ref_key:"uploadImageRef",ref:h,class:"input-upload rounded-4",drag:"",data:{dir_name:"actor/three_view",dir_title:"演员三视图"},action:l(D).getCompleteUrl("app/shortplay/api/Uploads/upload"),headers:l(D).getHeaders(),accept:"image/jpeg,image/png",limit:1,type:"cover",disabled:l(p),"before-upload":()=>(p.value=!0,!0),"on-success":Z,"show-file-list":!1,"on-error":()=>{p.value=!1,j()}},{default:i(()=>[l(e).three_view_image?(n(),f(Ce,{key:1,src:l(e).three_view_image,class:"image-cover",fit:"contain"},null,8,["src"])):(n(),r(C,{key:0},[s(b,{class:"el-icon--upload"},{default:i(()=>[s($e)]),_:1}),a[23]||(a[23]=o("div",{class:"el-upload__text"},[o("span",{class:"h10"},"拖拽演员三视图到此处或"),o("span",{class:"h10"},"点击上传")],-1)),a[24]||(a[24]=o("div",{class:"el-upload__text"},[o("span",{class:"h10"},"支持上传格式："),o("span",{class:"h10"},"PNG, JPG, JPEG")],-1)),a[25]||(a[25]=o("div",{class:"el-upload__text"},[o("span",{class:"h10"},"形象照片建议比例："),o("span",{class:"h10"},"1:1")],-1))],64))]),_:1},8,["action","headers","disabled","before-upload","on-error"])):ae("",!0)]),o("div",sa,[s(O,{src:l(e).headimg,shape:"square",size:60,class:"pointer",onClick:a[9]||(a[9]=u=>W.value="headimg")},{default:i(()=>[o("div",{class:ce(["flex flex-column flex-center grid-gap-1",{"text-secondary":l(W)==="three_view"}])},[s(b,{size:"20"},{default:i(()=>[l(A)?(n(),f(K,{key:0,class:"circular"})):(n(),f(_l,{key:1}))]),_:1}),a[26]||(a[26]=o("span",{class:"h10"},"形象图",-1))],2)]),_:1},8,["src"]),s(O,{src:l(e).three_view_image,shape:"square",size:60,class:"pointer",onClick:a[10]||(a[10]=u=>W.value="three_view")},{default:i(()=>[o("div",{class:ce(["flex flex-column flex-center grid-gap-1",{"text-secondary":l(W)==="headimg"}])},[s(b,{size:"20"},{default:i(()=>[l(p)?(n(),f(K,{key:0,class:"circular"})):(n(),f(pl,{key:1}))]),_:1}),a[27]||(a[27]=o("span",{class:"h10"},"三视图",-1))],2)]),_:1},8,["src"])])]))])]),_:1},8,["model","rules","disabled"])]),_:1},8,["modelValue","width"]),s(fe,{ref_key:"actorHeadimgPopoverRef",ref:oe,"virtual-ref":l(se),"virtual-triggering":"",teleported:!1,placement:"bottom-start",width:"min(100vw,380px)",trigger:"click"},{default:i(()=>[s(Ie,{onSelect:te,scene:"actor_image","no-init":""})]),_:1},8,["virtual-ref"]),s(fe,{ref_key:"actorThreeViewModelPopoverRef",ref:ee,"virtual-ref":l(ie),"virtual-triggering":"",teleported:!1,placement:"bottom-start",width:"min(100vw,380px)",trigger:"click"},{default:i(()=>[s(Ie,{onSelect:ne,scene:"actor_three_view_image","no-init":""})]),_:1},8,["virtual-ref"]),s(je,{ref_key:"voiceDialogRef",ref:ye,onSuccess:Me},null,512)])}}}),ua=_e(ta,[["__scopeId","data-v-fd6b25a7"]]);export{ua as _,fl as a,gl as b,Al as c};
