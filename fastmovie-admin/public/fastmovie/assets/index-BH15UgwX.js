const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/control-BWuCLdhF.js","assets/vendor-CvgTi-PR.js","assets/vendor-C_L1O3Vf.css","assets/index-DsdlcDQ9.js","assets/index-B7hle1sp.js","assets/index-Mxec04FD.css","assets/icon-points-D7DNlrKI.js","assets/usePush-CQ3BxbHW.js","assets/index-KTaDjB80.css","assets/control-iK6Yohk2.css","assets/index-Dn84OqVB.js","assets/usePoints-CJVGfUhe.js","assets/usePoints-I3UqXCha.css","assets/icon-style-BSgm2qkI.js","assets/xl-actor-create-SFkdUGJO.js","assets/icon-image-CSoT6VnF.js","assets/xl-actor-create-C8Gvs6x0.css","assets/icon-style-Drsqfd7e.css","assets/index-OO3edrff.js","assets/index-_7S3YlNY.css","assets/drama-BXxeC7tz.js","assets/useLoading-Dec6dIPy.js","assets/useLoading-BL_p5tTB.css","assets/index-HHAsKNR3.css","assets/index-oee-5sMv.js","assets/index-D3qTlVGl.js","assets/index-DA2QkzFg.js","assets/index-BLgXCkav.js","assets/index-DrTEDHi_.css","assets/square-DxUTgmYt.js","assets/icon-like-DjpyqzWl.js","assets/square-DltsaqiX.css","assets/drama-BHCPAYcR.js","assets/index-C6VZDQfc.js","assets/index-CBits2Gs.css","assets/icon-replace-CB6dF5JP.js","assets/xl-prop-create-DFEaKG_K.js","assets/xl-prop-create-_ncpaGIV.css","assets/icon-batch-ClZZtPu-.js","assets/drama-HeJCKsnT.css","assets/index-CArmc6US.js","assets/index-BKnriX-a.css","assets/points-BFkA76dU.js","assets/icon-close-D_AFdLsR.js","assets/icon-close-D3TpwuLP.css","assets/points-dhwknN2y.css","assets/code-CezE5svb.js","assets/code-h6C-IN_Q.css","assets/vip-DOgYL8Na.js","assets/vip-B-56HC6d.css","assets/content-DSOg5fHX.js","assets/index-BRdDCF0X.js","assets/index-DtFMmZgf.css","assets/index-79vIc1an.js","assets/xl-scene-create-tf33IsFU.js","assets/xl-scene-create-DGqWBSd_.css","assets/xl-dialogue-create.vue_vue_type_script_setup_true_lang-D9GFa6wn.js","assets/icon-next-step-Cz1f3Ydv.js","assets/index-BroHOaMN.css","assets/index-DyMExFVx.js","assets/icon-prev-step-3ykngVhx.js","assets/index-C4cmVFWk.css","assets/index-Bxo-iH4D.js","assets/index-CXSJzb3g.css","assets/index-6jpe48aS.js","assets/index-BNLKSvbm.css","assets/index-jiPG__hb.js","assets/index-Dr6v9yWQ.css"])))=>i.map(i=>d[i]);
import{r as x,w as de,c as ot,E as P,o as le,a as ye,d as Y,b as nt,e as ie,f as Ee,u as l,g as pe,Q as st,h as w,i as Ue,j as ae,k as Q,l as v,n as at,m as f,p as De,q as Ne,s as b,t as Z,v as $e,x as q,y as rt,z as ve,A as z,B as qe,C as Se,D as ue,F as Ce,G as We,H as X,I as W,J as it,K as lt,L as ct,M as be,N as ut,O as ne,P as dt,R as pt,S as mt,T as re,U as ht,V as gt,W as me,X as ft,Y as _t,Z as vt,_ as Ct,$ as xe,a0 as bt,a1 as xt,a2 as yt,a3 as Et,a4 as St}from"./vendor-CvgTi-PR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();const fe=globalThis.localStorage,wt="SHORT-PLAY",ee=()=>{const o=(a,r,i)=>new Promise((_,p)=>{const m={expire:0,data:r};i!==void 0&&(m.expire=Date.now()+i*1e3),fe.setItem(s(a),JSON.stringify(m)),e(a)===null?p():_(!0)}),e=a=>{const r=fe.getItem(s(a));if(r===null)return null;const i=JSON.parse(r);return i?.expire>0&&i?.expire<Date.now()?null:i?.data},t=a=>new Promise((r,i)=>{fe.removeItem(s(a)),e(a)===null?r(!0):i()}),n=a=>{const r=e(a);return t(a),r},s=a=>`${wt}.${a}`;return{set:o,get:e,remove:t,getOnce:n,getKey:s}},Tt=()=>{const o=ee(),e=x({});return{WEBCONFIG:e,initWebConfig:()=>{const s=o.get("WEBCONFIG");s&&(e.value=s)},setWebConfig:s=>{e.value=s,o.set("WEBCONFIG",s,3600)}}},Lt=()=>{const o=ee(),e=[{label:"简体中文",value:"zh-CN"},{label:"English",value:"en"}],t=x({AsideState:!0,NotMenusAsideState:!1,language:e[0].value,InputFocusState:!1});return de(()=>t.value,r=>{o.set("STATE",r)},{deep:!0}),{STATE:t,LANGUARE:e,initState:()=>{const r=o.get("STATE");r&&(r.language||(r.language=e[0].value),r.InputFocusState===void 0&&(r.InputFocusState=!1),t.value=r)},setState:(r,i)=>{t.value[r]=i},toggle:r=>{t.value[r]=!t.value[r]}}},kt={button:{confirmText:"Submit",resetText:"Reset",cancelText:"Cancel",queryText:"Query",allSelectText:"Select All",redirectText:"Redirect",loginText:"Login",logoutText:"Logout",registerText:"Register",applyText:"Apply for Access",myPayText:"I have paid",retryText:"Click to retry",cancelAuthorizationText:"Cancel Authorization",addAuthorizationText:"Add Authorization",uploadText:"Upload",completeText:"Complete",manageText:"Manage",moveText:"Move",deleteText:"Delete",copyText:"Copy",insertText:"Insert",byBundleSelectText:"Select from the gallery"},message:{tips:"Tips",title:"Tips",error:"Error",error_code:"Error Code",error_text:"Error Message",requestFullscreenError:"Fullscreen Failed, Press F11 to Fullscreen",exitFullscreenError:"Exit Fullscreen Failed, Press F11 to Exit Fullscreen",confirmActionContent:"Are you sure you want to perform this action?",confirmLogoutContent:"Are you sure you want to logout?",noApplyContent:"No Apply Channel",rejectContent:"Rejection Reason: {message}",scanPayContent:"Scan and Pay",qrcodeExpireContent:"QR Code Expired",getQrcodeFail:"Get QR Code Failed",userCannel:"User Cancel",qrcodeWillExpireTitle:"QR Code Validity Period",qrcodeWillExpireContent:"QR Code Will Expire in {time} Seconds",searchMenuNotContent:"No Related Content Found",uploadSizeError:"File Size Cannot Exceed {size}MB",copySuccess:"Copy Success",copyFail:"Copy Failed"}},Pe={button:{confirmText:"提交",resetText:"重置",cancelText:"取消",queryText:"查询",allSelectText:"全选",redirectText:"跳转",loginText:"登录",logoutText:"退出登录",registerText:"注册",applyText:"申请开通",myPayText:"我已支付",retryText:"点击重试",cancelAuthorizationText:"取消授权",addAuthorizationText:"添加授权",uploadText:"上传",completeText:"完成",manageText:"管理",moveText:"移动",deleteText:"删除",copyText:"复制",insertText:"插入",byBundleSelectText:"从图库中选择"},message:{tips:"提示",title:"温馨提示",error:"错误",error_code:"错误码",error_text:"错误信息",requestFullscreenError:"全屏失败，按F11全屏",exitFullscreenError:"退出全屏失败，按F11退出全屏",confirmActionContent:"您确定要执行此操作吗？",confirmLogoutContent:"确定退出登录吗？",noApplyContent:"暂未开通申请通道",rejectContent:"驳回理由：{message}",scanPayContent:"扫码支付",qrcodeExpireContent:"二维码已过期",getQrcodeFail:"获取二维码失败",userCannel:"用户取消",qrcodeWillExpireTitle:"二维码有效期",qrcodeWillExpireContent:"二维码将在{time}秒后过期",searchMenuNotContent:"没有找到相关内容",uploadSizeError:"文件大小不能超过{size}MB",copySuccess:"复制成功",copyFail:"复制失败"}},we=ot({legacy:!1,locale:"zh-CN",globalInjection:!0,messages:{en:kt,zh:Pe,"zh-CN":Pe}}),{t:se}=we.global;function Ao(o,e){let t;return function(...n){t||(t=setTimeout(()=>{t=void 0,o.apply(this,n)},e))}}function It(o,e){let t;return function(...n){t&&clearTimeout(t),t=setTimeout(()=>{t=void 0,o.apply(this,n)},e)}}function Vo(o,e=0){let t=o;e>0&&(t=It(o,e));const n=()=>{t({w:globalThis.innerWidth,h:globalThis.innerHeight})};le(()=>{globalThis.addEventListener("resize",n)}),ye(()=>{globalThis.removeEventListener("resize",n)})}function Qt(o,e){const t=n=>{n.key===null?e():n.key===o&&e(n)};return globalThis.addEventListener("storage",t),function(){globalThis.removeEventListener("storage",t)}}const Oe=o=>new Promise((e,t)=>{let n=document.createElement("input");n.value=o,document.body.appendChild(n),n.select(),n.setSelectionRange(0,n.value.length),document.execCommand("Copy")?e():t(),n.remove()});function Ro(o){navigator.clipboard&&globalThis.isSecureContext?navigator.clipboard.writeText(o).then(()=>{P.success(se("message.copySuccess"))}).catch(()=>{Oe(o).then(()=>{P.success(se("message.copySuccess"))}).catch(()=>{P.error(se("message.copyFail"))})}):Oe(o).then(()=>{P.success(se("message.copySuccess"))}).catch(()=>{P.error(se("message.copyFail"))})}function Mo(o,e,t=0){return o?e>=o.length?o:[...o].slice(t,t+e).join(""):""}function Fo(o){return o<1024?o+"B":o<1024*1024?(o/1024).toFixed(2)+"KB":o<1024*1024*1024?(o/1024*1024).toFixed(2)+"MB":(o/1024*1024*1024).toFixed(2)+"GB"}function Uo(o="",e=!1){return o+Date.now().toString(16)+(e?Math.random().toString(36).substring(2,15):"")+Math.random().toString(36).substring(2,15)}function Do(o){const e=Math.floor(o/1e3),t=Math.floor(e/60),n=Math.floor(t/60),s=e%60,r=[(t%60).toString().padStart(2,"0"),s.toString().padStart(2,"0")];return n&&r.unshift(n.toString().padStart(2,"0")),r.join(":")}const Pt="modulepreload",Ot=function(o){return"/fastmovie/"+o},Ae={},I=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let _=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),i=r?.nonce||r?.getAttribute("nonce");s=_(t.map(p=>{if(p=Ot(p),p in Ae)return;Ae[p]=!0;const m=p.endsWith(".css"),c=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${c}`))return;const u=document.createElement("link");if(u.rel=m?"stylesheet":Pt,m||(u.as="script"),u.crossOrigin="",u.href=p,i&&u.setAttribute("nonce",i),document.head.appendChild(u),m)return new Promise((k,F)=>{u.addEventListener("load",k),u.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(r){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r}return s.then(r=>{for(const i of r||[])i.status==="rejected"&&a(i.reason);return e().catch(a)})},V={SUCCESS:200,WAIT:202,SUCCESS_EVENT_PUSH:201,FAIL:404,NEED_LOGIN:12e3,NEED_TWOFA:12001,CAPTCHA:300,SITE_ERROR:400,NEED_PAY:9100,PAY_SUCCESS:9e3,PAY_FAIL:9010,REDIRECT:302,REDIRECT_CONFIRM:303,OPEN_NEW_WINDOW:304,OPEN_NEW_WINDOW_CONFIRM:305,NO_PERMISSION:403,LOCK:423},At=Y({__name:"index",props:{text:{},size:{default:200}},emits:["update"],setup(o,{emit:e}){const t=o,n=e,s=x("");return nt(()=>{s.value="",t.text&&st.toDataURL(t.text,{width:t.size},(a,r)=>{s.value=r,n("update")})}),(a,r)=>{const i=pe;return l(s)?(w(),ie(i,{key:0,src:l(s),style:{width:"100%",height:"100%"}},null,8,["src"])):Ee("",!0)}}}),Vt={class:"flex flex-column flex-y-center"},Rt={class:"text-white text-break-all"},Mt=Y({__name:"index",props:{qrcode:{},url:{},check:{},size:{default:200}},emits:["success","retry"],setup(o,{emit:e}){const{t}=Ue(),n=o,s=e,a=x({id:""}),r=x(),i=x(),_=()=>{n.url&&(u.value=void 0,R.get(n.url).then(E=>{E.code===200?(a.value.id=E.data.id,r.value=E.data.qrcode,E.data.expire&&(i.value=new Date(E.data.expire*1e3).getTime())):k(E.msg)}).catch(()=>{k(t("message.getQrcodeFail"))}))};let p;const m=x(!1),c=()=>{!n.check||m.value||(p&&clearTimeout(p),p=void 0,R.post(n.check,a.value).then(E=>{E.code===V.SUCCESS?(m.value=!0,s("success",E)):E.code===V.WAIT?p=setTimeout(()=>{c()},1e3):(m.value=!0,k(E.msg))}).catch(E=>{E.code!="ERR_CANCELED"&&k(E.message)}))},u=x(),k=E=>{i.value=void 0,u.value=E},F=()=>{n.url?_():s("retry")};return le(()=>{n.url?_():n.qrcode&&(a.value.id=n.qrcode.id,r.value=n.qrcode.qrcode,n.qrcode.expire&&(i.value=new Date(n.qrcode.expire*1e3).getTime()))}),ye(()=>{p&&clearTimeout(p),r.value=void 0}),(E,D)=>{const T=At,$=ae("CircleClose"),O=Ne,h=$e,d=rt;return w(),Q("div",Vt,[v("div",{class:"qrcode",style:at([`width:${n.size}px;height:${n.size}px;`])},[f(T,{text:l(r),size:Number(n.size),onUpdate:c},null,8,["text","size"]),v("div",{class:De(["error flex flex-column flex-center grid-gap-4",{show:l(u)}])},[f(O,{size:"40",color:"var(--el-color-danger)"},{default:b(()=>[f($)]),_:1}),v("div",Rt,Z(l(u)),1),f(h,{type:"primary",onClick:F,underline:"never"},{default:b(()=>[q(Z(l(t)("button.retryText")),1)]),_:1})],2)],4),l(i)?(w(),ie(d,{key:0,class:"flex flex-column flex-center",title:l(t)("message.qrcodeWillExpireTitle"),value:l(i),onFinish:D[0]||(D[0]=()=>k(l(t)("message.qrcodeExpireContent")))},null,8,["title","value"])):Ee("",!0)])}}}),j=(o,e)=>{const t=o.__vccOpts||o;for(const[n,s]of e)t[n]=s;return t},Ft=j(Mt,[["__scopeId","data-v-8fee4ac0"]]),Ut={class:"x-vcode"},Dt={class:"x-vcode-form"},Nt=Y({__name:"index",props:{data:{default:()=>({})}},emits:["success","close"],setup(o,{emit:e}){const t=o,n=e,s=()=>{n("close")},a=ve({username:"",captcha:"",token:null,...t.data}),r=x(""),i=()=>{R.get("/app/user/api/Captcha/captcha_json").then(m=>{m.code===200&&(r.value=m.data.base64,a.token=m.data.token)})},_=x(!1),p=()=>{_.value=!0,console.log(t.data.headers);const m={...t.data.headers};R.post("/app/control/api/Public/getSmsVcode",a,{headers:m}).then(c=>{c.code===V.SUCCESS?(n("success",{token:a.token}),P.success(c.msg)):P.error(c.msg)}).finally(()=>{_.value=!1})};return le(()=>{i()}),(m,c)=>{const u=pe,k=qe,F=Se;return w(),Q("div",Ut,[v("div",Dt,[v("span",null,"发送至："+Z(o.data.countryCode)+" "+Z(o.data.username),1),f(k,{modelValue:l(a).captcha,"onUpdate:modelValue":c[0]||(c[0]=E=>l(a).captcha=E),placeholder:"请输入图形验证码",onKeyup:z(p,["enter"]),disabled:l(_)},{append:b(()=>[f(u,{src:l(r),class:"x-login-form-captcha-img",alt:"验证码",title:"点击更换验证码",onClick:i},null,8,["src"])]),_:1},8,["modelValue","disabled"])]),v("div",null,[f(F,{onClick:s,disabled:l(_)},{default:b(()=>[...c[1]||(c[1]=[q("取消",-1)])]),_:1},8,["disabled"]),f(F,{type:"primary",onClick:p,loading:l(_)},{default:b(()=>[...c[2]||(c[2]=[q("获取验证码",-1)])]),_:1},8,["loading"])])])}}}),$t=j(Nt,[["__scopeId","data-v-7cbf3177"]]),Ve=()=>{const o=x("获取验证码"),e=x(!1);let t,n=60;return{open:a=>new Promise((r,i)=>{const _={showClose:!1,showCancelButton:!1,showConfirmButton:!1,customClass:"x-login-message-box",customStyle:{"--el-messagebox-width":"min(375px,100%)","--el-messagebox-height":"300px"},closeOnPressEscape:!1,closeOnClickModal:!1,message:()=>Ce($t,{data:a,onSuccess:p=>{o.value="重新获取",e.value=!0,t=setInterval(()=>{o.value=`重新获取(${n--}s)`,n<=0&&(clearInterval(t),t=void 0,o.value="获取验证码",e.value=!1,n=60)},1e3),_.onVanish?.(),r(p)},onClose:()=>{_.onVanish?.(),t&&(clearInterval(t),t=void 0),i("关闭验证码")}})};ue(_).then(()=>{}).catch(p=>{i(p)})}),btnText:o,btnDisabled:e}},qt={},Wt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",fill:"currentColor",version:"1.1",width:"60",height:"60",viewBox:"0 0 60 60"};function Bt(o,e){return w(),Q("svg",Wt,[...e[0]||(e[0]=[We('<defs><clipPath id="master_svg0_68_12540"><rect x="11.000000953674316" y="11.000000953674316" width="38.000003814697266" height="38.000003814697266" rx="0"></rect></clipPath></defs><g><g><rect x="0" y="0" width="60" height="60" rx="30" fill="currentColor" fill-opacity="1"></rect><rect x="0.5" y="0.5" width="59" height="59" rx="29.5" fill-opacity="0" stroke-opacity="1" stroke="#FFFFFF" fill="none" stroke-width="1"></rect></g><g clip-path="url(#master_svg0_68_12540)"><g><path d="M38.66779795367432,12.000000953674316L21.332206753674317,12.000000953674316C18.937826153674315,12.000000953674316,17.000000953674316,14.017970053674317,17.000000953674316,16.503518153674317L17.000000953674316,43.49649695367432C17.000000953674316,45.985558953674314,18.941208353674316,48.00000495367431,21.332206753674317,48.00000495367431L30.00000295367432,48.00000495367431L38.66779795367432,48.00000495367431C41.062174953674315,48.00000495367431,43.00000495367432,45.98203395367432,43.00000495367432,43.49649695367432L43.00000495367432,16.503518153674317C43.00000495367432,14.014454553674316,41.05879295367431,12.000000953674316,38.66779795367432,12.000000953674316ZM25.667794253674316,15.378517153674316C25.667794253674316,14.756251853674316,26.151404353674316,14.253516953674316,26.74999995367432,14.253516953674316L33.250000953674316,14.253516953674316C33.848597953674314,14.253516953674316,34.33220795367431,14.756251853674316,34.33220795367431,15.378517153674316C34.33220795367431,16.000783453674316,33.848597953674314,16.503518153674317,33.250000953674316,16.503518153674317L26.74999995367432,16.503518153674317C26.151406253674317,16.503518153674317,25.667794253674316,16.000783453674316,25.667794253674316,15.378517153674316ZM30.00000295367432,45.746494953674315C28.802808953674315,45.746494953674315,27.83220595367432,44.73399795367432,27.83220595367432,43.492973953674316C27.83220595367432,42.24844995367432,28.802808953674315,41.23946095367432,30.00000295367432,41.23946095367432C31.197193953674315,41.23946095367432,32.167792953674315,42.24844995367432,32.167792953674315,43.492973953674316C32.167792953674315,44.733990953674315,31.197193953674315,45.746494953674315,30.00000295367432,45.746494953674315ZM40.83220595367432,38.56407295367431C40.83220595367432,38.799614953674315,40.64958895367432,38.992973953674316,40.41961595367432,38.992973953674316L19.580385953674316,38.992973953674316C19.353799853674317,38.992973953674316,19.167794953674317,38.80313195367432,19.167794953674317,38.56407295367431L19.167794953674317,19.182424553674316C19.167794953674317,18.946878453674316,19.350416853674318,18.75351855367432,19.580385953674316,18.75351855367432L40.422998953674316,18.75351855367432C40.64958895367432,18.75351855367432,40.83558795367432,18.943361753674317,40.83558795367432,19.182424553674316L40.83558795367432,38.56407295367431L40.83220595367432,38.56407295367431Z" fill="#FFFFFF" fill-opacity="1"></path></g></g></g>',2)])])}const zt=j(qt,[["render",Bt]]),Zt={},Kt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",fill:"currentColor",version:"1.1",width:"60",height:"60",viewBox:"0 0 60 60"};function jt(o,e){return w(),Q("svg",Kt,[...e[0]||(e[0]=[v("g",null,[v("g",null,[v("rect",{x:"0",y:"0",width:"60",height:"60",rx:"30",fill:"currentColor","fill-opacity":"1"})]),v("g",null,[v("path",{d:"M36.370053999999996,24.076830899999997C36.784264,24.076830899999997,37.19276,24.108159999999998,37.597279,24.153620699999998C36.495160999999996,18.9024591,31.006449,15,24.741968999999997,15C17.7377777,15,12,19.884407500000002,12,26.086145000000002C12,29.665385999999998,13.9093336,32.605106,17.0987515,34.885176L15.8245504,38.807409L20.2783928,36.521742C21.8731003,36.843996000000004,23.151154,37.176315,24.741968999999997,37.176315C25.14162,37.176315,25.537334,37.156189,25.931144,37.123898C25.68195,36.253085999999996,25.537336,35.339878,25.537336,34.39324C25.537378,28.698621,30.31757,24.076830899999997,36.370053999999996,24.076830899999997ZM29.520214,20.542088C30.479748,20.542088,31.11488,21.188611,31.11488,22.1695538C31.11488,23.146427199999998,30.479748,23.8010435,29.520214,23.8010435C28.564529,23.8010435,27.606943,23.1464252,27.606943,22.1695538C27.606945,21.188611,28.564571,20.542088,29.520214,20.542088ZM20.6027946,23.8009996C19.647112800000002,23.8009996,18.6836424,23.1463814,18.6836424,22.1695094C18.6836424,21.1885676,19.647112800000002,20.5420442,20.6027946,20.5420442C21.5574188,20.5420442,22.193567,21.1885662,22.193567,22.1695094C22.193567,23.1464252,21.5574188,23.8009996,20.6027946,23.8009996ZM48,34.236637C48,29.024898999999998,42.902226999999996,24.776907899999998,37.177144999999996,24.776907899999998C31.114882,24.776907899999998,26.340574,29.024898999999998,26.340574,34.236637C26.340574,39.455946,31.114882,43.694835999999995,37.177144999999996,43.694835999999995C38.445463000000004,43.694835999999995,39.725548,43.369474,40.999662,43.042231L44.495029,45.000001999999995L43.536384999999996,41.743059C46.09465,39.779211000000004,48,37.176315,48,34.236637ZM33.663281999999995,32.605104C33.029163,32.605104,32.389122,31.959587,32.389122,31.3009C32.389122,30.651358000000002,33.029163,29.997746,33.663281999999995,29.997746C34.626753,29.997746,35.257988,30.651358000000002,35.257988,31.3009C35.257988,31.959589,34.626753,32.605104,33.663281999999995,32.605104ZM40.671368,32.605104C40.042159999999996,32.605104,39.406012000000004,31.959587,39.406012000000004,31.3009C39.406012000000004,30.651358000000002,40.042159999999996,29.997746,40.671368,29.997746C41.627052,29.997746,42.266075,30.651358000000002,42.266075,31.3009C42.266075,31.959589,41.627048,32.605104,40.671368,32.605104Z",fill:"#FFFFFF","fill-opacity":"1"})])],-1)])])}const Gt=j(Zt,[["render",jt]]),Ht={},Jt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",fill:"currentColor",version:"1.1",width:"20",height:"20",viewBox:"0 0 20 20"};function Xt(o,e){return w(),Q("svg",Jt,[...e[0]||(e[0]=[We('<defs><clipPath id="master_svg0_68_10427"><rect x="0" y="0" width="20" height="20" rx="0"></rect></clipPath></defs><g clip-path="url(#master_svg0_68_10427)"><g><g><path d="M9.9457603,19C7.5936885,19,5.7889545,17.395275,4.689348900000001,16.046727C3.5108483,14.606342,2.69723834,12.900114,2.588757291,12.078418C2.583826385,12.044583,2.573964283,11.996249,2.559171576,11.943079C2.534516763,11.831909,2.5,11.686904,2.5,11.522565L2.5,4.1079647999999995C2.5,3.9532928,2.564102478,3.8034542,2.67751472,3.6922832C2.79092696,3.5811129,2.94378704,3.5231102,3.10157794,3.5279438C3.14102578,3.5279438,7.1055231,3.5762789,9.561144800000001,1.16919248C9.7879691,0.946851119,10.1577916,0.942017637,10.3944778,1.16435896C12.938856,3.5907795,16.854043,3.5279438,16.893492000000002,3.5279438C17.051282999999998,3.5231106,17.209073,3.5811129,17.322485,3.6922832C17.435897,3.8034542,17.5,3.9532928,17.5,4.1079647999999995L17.5,11.875411C17.440828,12.692274,16.651875,14.442002,15.433926,15.950057C14.314596,17.342108,12.4506903,19,9.9457603,19ZM3.6834316,4.6734855L3.6834316,11.527398C3.6834316,11.561233,3.6982247,11.624068,3.7130172999999997,11.686904C3.7278104,11.759407,3.7475343,11.841577,3.762327,11.933413C3.8954630999999997,12.929115,6.3609464,17.83996,9.945759299999999,17.83996C11.9773169,17.83996,13.550295,16.418908000000002,14.506903,15.229865C15.636094,13.832982,16.267257999999998,12.30076,16.316568,11.812575L16.316568,4.6734855C15.083827,4.6058161,12.228797,4.2336358999999995,9.985207599999999,2.3679025C7.7958584,4.2288029,4.9260354,4.600982699999999,3.6834316,4.6734855Z" fill="currentColor" fill-opacity="1"></path><path d="M15.511724,16.012889L15.511858,16.012721Q16.388566,14.927153,16.991298,13.697553Q17.550978999999998,12.555782,17.599739,11.882636L17.6,11.879029L17.6,4.107965Q17.6,3.8242836,17.392488,3.6208701Q17.186908000000003,3.4193547,16.891696,3.427953L16.889671,3.4279695Q15.842029,3.437043,14.559608,3.1483107Q12.0202589,2.5765864,10.462945900000001,1.091474153Q10.2567186,0.89774585,9.9733095,0.900022946Q9.6905699,0.902294666,9.4911447,1.097779602Q7.9874153,2.5717871,5.441997499999999,3.1450291Q4.157164,3.4343805,3.10449821,3.4279575L3.10328287,3.4279504Q2.81290513,3.4195387,2.6075132,3.6208704Q2.39999999,3.8242826,2.39999999,4.107965L2.39999999,11.522565Q2.39999999,11.688658,2.457314745,11.94573Q2.460182939,11.958594,2.461543672,11.96473L2.462118708,11.967323L2.462830558,11.969883Q2.481842333,12.038218,2.489617315,12.091508Q2.578664653,12.766002,3.14884055,13.876249Q3.7634211,15.07296,4.6118481,16.109926Q7.0499587,19.1,9.9457603,19.1Q11.6724405,19.1,13.26337,18.081263Q14.469622,17.308849,15.511724,16.012889ZM16.811712,13.609522Q16.218815,14.819057,15.35613,15.887227L15.355994,15.887394Q12.933599,18.900002,9.9457603,18.900002Q7.1449394,18.900002,4.7668507,15.983537Q3.9316424999999997,14.962728,3.32675081,13.784882Q2.77240792,12.705464,2.68789683,12.06533Q2.67808358,11.997931,2.65623094,11.918866Q2.6548465,11.912634,2.65252197,11.902208Q2.60000001,11.666633,2.60000001,11.522565L2.60000001,4.107965Q2.60000001,3.9082971,2.74751624,3.7636962Q2.8924925,3.6215861,3.0985160499999997,3.6278973L3.10004663,3.627944L3.101578,3.627944L3.10327786,3.627954Q4.1788015000000005,3.6345165,5.4859381,3.3401423Q8.0868182,2.7544098999999997,9.631146900000001,1.24060543Q9.772914400000001,1.10163953,9.9749169,1.1000165Q10.1781912,1.098383263,10.326010700000001,1.23724386Q11.9223061,2.759539,14.515678,3.3434265Q15.820649,3.6372354,16.891403,3.6279619L16.893493,3.627944L16.895023000000002,3.627944L16.896554000000002,3.6278973Q17.10736,3.6214402,17.252485,3.7636964Q17.400001,3.9082987,17.400001,4.107965L17.400001,11.871744Q17.352787,12.50571,16.811712,13.609522ZM9.9845042,2.2372582000000003L9.920444,2.2917078Q8.5033298,3.4962251,6.4512643999999995,4.095351Q5.0966051,4.4908607,3.6776077000000003,4.5736558L3.5834317,4.5791504L3.5834317,11.527398Q3.5834317,11.572602,3.6153370000000002,11.708368Q3.6197431,11.729882,3.6290765,11.773215Q3.6532508,11.885454,3.6633943,11.948046Q3.7252288,12.406628,4.1914371,13.321767Q4.735049200000001,14.388845,5.4815602000000005,15.322523Q7.5743012,17.93996,9.945759299999999,17.93996Q12.4549227,17.93996,14.584818,15.292554Q15.35878,14.335112,15.906379,13.224689Q16.36925,12.286078,16.416062,11.822625L16.416569000000003,11.817614L16.416569000000003,4.5788245L16.32205,4.5736361Q14.92287,4.4968302,13.557941,4.0989637000000005Q11.5029049,3.4999363,10.0491462,2.2910144L9.9845042,2.2372582000000003ZM9.985891299999999,2.4979997000000003Q8.554307900000001,3.6896913,6.5073166,4.2873356000000005Q5.1758816,4.6760646999999995,3.7834316,4.7674778L3.7834316,11.527398Q3.7834316,11.549619,3.8103565,11.663989L3.8106996,11.665446L3.8109989,11.666913Q3.8151647,11.68733,3.8245929,11.731105Q3.8501183,11.849617,3.8610544,11.917511L3.8612674,11.918833L3.861445,11.92016Q3.9182363000000002,12.344894,4.3696445,13.230981Q4.9039979,14.279884,5.6377690000000005,15.197629Q7.6704602,17.73996,9.945759299999999,17.73996Q12.3591366,17.73996,14.428989,15.167185Q15.18925,14.226688,15.727005,13.13623Q16.171343,12.235203,16.216569,11.807425L16.216569,4.7677844Q14.842853,4.6818295,13.501972,4.2909727Q11.4523659,3.6935282,9.985891299999999,2.4979997000000003Z" fill-rule="evenodd" fill="currentColor" fill-opacity="1"></path></g><g><path d="M9.019880035592651,11.884848068572998L8.985363435592651,11.884848068572998C8.822641635592651,11.875180768573,8.674712635592652,11.802678568572997,8.56623103559265,11.677007168572999L6.583982035592651,9.371424468572998C6.371950544592651,9.124915568572998,6.406467161592651,8.762402268572998,6.6579464655926515,8.554561468572999C6.909425765592651,8.346720768572998,7.279248535592651,8.380555268572998,7.491279935592651,8.627064068572999L9.069188835592652,10.468630568572998L12.925205435592652,6.954670798572998C13.16682313559265,6.737163186572998,13.536645635592652,6.751663230572998,13.763469935592651,6.983672048572998C13.985363735592651,7.220514028572998,13.97057123559265,7.583026708572998,13.733884135592652,7.805368068572998L9.424218635592652,11.735009668572998C9.310806735592651,11.826846568572998,9.167808035592651,11.884848068572998,9.019880035592651,11.884848068572998Z" fill="currentColor" fill-opacity="1"></path><path d="M9.019880035592651,11.984848468572999Q9.274590235592651,11.984848468572999,9.487149735592652,11.812725568572997L9.489429235592652,11.810879668572998L13.802351735592651,7.878253068572998Q14.010105335592652,7.683091818572998,14.020575235592652,7.403702738572998Q14.031092435592651,7.123060318572998,13.834975435592652,6.913764778572998Q13.636607435592651,6.710862338572998,13.353483935592651,6.700667522572998Q13.069268035592652,6.690433348572998,12.85784933559265,6.880757845572998L9.078040635592652,10.325269968572998L7.567093235592651,8.561854468572998Q7.381290675592651,8.345839268572998,7.098210095592651,8.320820068572997Q6.8141682455926516,8.295715968572997,6.5942407855926515,8.477480268572998Q6.373250350592651,8.660122468572998,6.3475680795926515,8.939332968572998Q6.321759665592651,9.219914468572998,6.5081545485926515,9.436617868572998L8.490533135592651,11.742351068572997Q8.684588235592651,11.967155468572997,8.97943303559265,11.984672568572998L8.98239593559265,11.984848468572999L9.019880035592651,11.984848468572999ZM9.359080335592651,11.659074268572997L13.665417435592651,7.732483208572998Q13.813320835592652,7.593544428572998,13.820715635592652,7.396212938572998Q13.82810903559265,7.198927728572998,13.691965335592652,7.053579298572998Q13.549497335592651,6.907855278572998,13.346287035592653,6.900537988572998Q13.142938335592651,6.893215723572998,12.992562035592652,7.028583768572998L9.060337335592651,10.611991368572998L7.415466485592651,8.692274068572997Q7.282687125592651,8.537904168572998,7.080602285592652,8.520043368572999Q6.878315925592651,8.502164968572998,6.721652325592651,8.631643668572998Q6.564789445592651,8.761286268572999,6.546727355592651,8.957652068572997Q6.5286865455926515,9.153786868572999,6.659809555592651,9.306231068572998L8.641928935592652,11.611663768572999Q8.779841635592652,11.771429968572999,8.98845033559265,11.784848168573L9.019880035592651,11.784848168573Q9.202479835592651,11.784848168573,9.359080335592651,11.659074268572997Z" fill-rule="evenodd" fill="currentColor" fill-opacity="1"></path></g></g></g>',2)])])}const Re=j(Ht,[["render",Xt]]),Yt={class:"x-login"},eo={class:"x-login-image"},to={class:"x-login-form"},oo={class:"x-login-form-content"},no={class:"x-login-other-icons"},so={class:"x-login-other-icons"},ao={key:2,class:"x-login-form-content"},ro={class:"x-login-form-agreement"},io=Y({__name:"index",emits:["success","close"],setup(o,{emit:e}){const t=U(),n=te(),{WEBCONFIG:s}=K(n),a=Ve(),r=Ve(),i=e,_=()=>{i("close")},p=x("login"),m=x([{label:"账号密码",value:"login"},{label:"手机号登录",value:"vcode"}]),c=ve({phoneCountryCode:"+86",username:"",password:"",vcode:"",token:null}),u=ve({phoneCountryCode:"+86",username:"",vcode:"",token:null}),k=x(!1),F=x([{label:"+86",value:"+86"},{label:"+852",value:"+852"},{label:"+853",value:"+853"},{label:"+855",value:"+855"},{label:"+856",value:"+856"}]),E=x(!1),D=x(!1),T=()=>{k.value=!1,M.value=null,A.value=null,p.value="qrcode"},$=()=>{k.value=!1,M.value=null,A.value=null,p.value="login"},O=()=>{E.value=!0,R.post("/app/user/api/Login/"+p.value,c).then(N).finally(()=>{E.value=!1})},h=X(()=>a.btnDisabled.value||c.username.length!==11),d=X(()=>r.btnDisabled.value||u.username.length!==11),C=X(()=>{switch(p.value){case"login":return!c.username.length||!c.password.length;case"vcode":return!c.username.length||!c.vcode.length}return!1}),y=X(()=>!u.username.length||!u.vcode.length),G=L=>L==null||L===""||String(L).trim()==="",N=L=>{console.log(L),L.code===V.SUCCESS?G(L.data?.mobile)?(k.value=!0,M.value=L.data,A.value=L.data?.token||null):(P.success("登录成功"),t.setUserInfo(L.data).then(()=>{i("success",L)}).catch(()=>{P.error("登录失败")})):P.error(L.msg)},M=x(null),A=x(null),je=()=>{const L={...R.getHeaders(),Authorization:A.value};r.open({username:u.username,countryCode:u.phoneCountryCode,scene:"bind_mobile",headers:L}).then(g=>{u.vcode="",u.token=g.token}).catch(()=>{})},ge=()=>{D.value=!0;const L=R.getHeaders();A.value&&(L.Authorization=A.value),R.axios.post("/app/user/api/User/bindMobile",u,{headers:{...L,Authorization:A.value}}).then(g=>{if(g.code===V.SUCCESS){P.success("登录成功");const H={...M.value,mobile:u.username};t.setUserInfo(H).then(()=>{k.value=!1,A.value=null,i("success",H)}).catch(()=>{P.error("登录失败")})}else P.error(g.msg)}).catch(g=>{const H=g?.response?.data||g;P.error(H?.msg||"绑定手机号失败")}).finally(()=>{D.value=!1})},Ge=()=>{a.open({username:c.username,countryCode:c.phoneCountryCode,scene:"signup"}).then(L=>{c.vcode="",c.token=L.token}).catch(()=>{})},He=X(()=>s.value?.login_background_image_url||"/fastmovie/static/image/login-image.png");return(L,g)=>{const H=pe,Je=ae("Close"),B=Ne,Xe=lt,Ye=ae("User"),J=qe,et=ae("Lock"),ke=ut,Ie=ct,ce=Se,tt=Ft,Qe=$e;return w(),Q("div",Yt,[v("div",eo,[f(H,{src:l(He),class:"x-login-image-img"},null,8,["src"])]),v("div",to,[f(B,{class:"x-login-form-close",onClick:_},{default:b(()=>[f(Je)]),_:1}),l(p)!=="qrcode"?(w(),Q(W,{key:0},[f(Xe,{modelValue:l(p),"onUpdate:modelValue":g[0]||(g[0]=S=>it(p)?p.value=S:null),options:l(m),class:"tabs-segmented border"},null,8,["modelValue","options"]),v("div",oo,[l(p)==="login"?(w(),Q(W,{key:0},[f(J,{modelValue:l(c).username,"onUpdate:modelValue":g[1]||(g[1]=S=>l(c).username=S),placeholder:"账号/手机号/邮箱",onKeyup:z(O,["enter"])},{prepend:b(()=>[f(B,{size:"20",color:"var(--el-bg-color)"},{default:b(()=>[f(Ye)]),_:1})]),_:1},8,["modelValue"]),f(J,{modelValue:l(c).password,"onUpdate:modelValue":g[2]||(g[2]=S=>l(c).password=S),placeholder:"请输入密码",onKeyup:z(O,["enter"])},{prepend:b(()=>[f(B,{size:"20",color:"var(--el-bg-color)"},{default:b(()=>[f(et)]),_:1})]),_:1},8,["modelValue"])],64)):(w(),Q(W,{key:1},[f(J,{modelValue:l(c).username,"onUpdate:modelValue":g[4]||(g[4]=S=>l(c).username=S),placeholder:"手机号",onKeyup:z(O,["enter"]),maxlength:11},{prepend:b(()=>[f(Ie,{modelValue:l(c).phoneCountryCode,"onUpdate:modelValue":g[3]||(g[3]=S=>l(c).phoneCountryCode=S),"popper-style":"--el-bg-color-overlay:rgba(247, 247, 247, 1);--el-border-color-light:rgba(247, 247, 247, 1);--el-text-color-regular:rgba(14, 14, 14, 1);--el-fill-color-light:var(--el-text-color-primary);"},{default:b(()=>[(w(!0),Q(W,null,be(l(F),S=>(w(),ie(ke,{key:S.value,label:S.label,value:S.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),f(J,{modelValue:l(c).vcode,"onUpdate:modelValue":g[5]||(g[5]=S=>l(c).vcode=S),placeholder:"请输入验证码",onKeyup:z(O,["enter"]),maxlength:6},{prepend:b(()=>[f(B,{size:"20",color:"var(--el-bg-color)"},{default:b(()=>[f(Re)]),_:1})]),append:b(()=>[f(ce,{type:"primary",class:"vcode-button",disabled:l(h),onClick:Ge},{default:b(()=>[q(Z(l(a).btnText),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])],64)),f(ce,{color:"var(--el-bg-color)",onClick:O,class:"x-login-form-login-button",disabled:l(C)},{default:b(()=>[...g[9]||(g[9]=[v("span",null,"确认登录",-1)])]),_:1},8,["disabled"]),g[10]||(g[10]=v("div",{class:"x-login-other"},[v("div",{class:"x-login-other-line"}),v("span",null,"其他方式登录"),v("div",{class:"x-login-other-line right"})],-1)),v("div",no,[f(B,{alt:"微信登录",class:"x-login-other-icons-img",onClick:T,color:"var(--el-color-success)"},{default:b(()=>[f(Gt)]),_:1})])])],64)):l(p)==="qrcode"&&!l(k)?(w(),Q(W,{key:1},[f(tt,{url:"/app/user/api/Login/qrcode",check:"/app/user/api/Login/checkQrcode",class:"qrcode-view",onSuccess:N}),g[11]||(g[11]=v("div",{class:"x-login-other"},[v("div",{class:"x-login-other-line"}),v("span",null,"其他方式登录"),v("div",{class:"x-login-other-line right"})],-1)),v("div",so,[f(B,{alt:"手机号登录",class:"x-login-other-icons-img",onClick:$,color:"var(--el-bg-color)"},{default:b(()=>[f(zt)]),_:1})])],64)):(w(),Q("div",ao,[g[13]||(g[13]=v("div",{class:"x-login-mobile-title"},"请补充手机号",-1)),f(J,{modelValue:l(u).username,"onUpdate:modelValue":g[7]||(g[7]=S=>l(u).username=S),placeholder:"手机号",onKeyup:z(ge,["enter"]),maxlength:11},{prepend:b(()=>[f(Ie,{modelValue:l(u).phoneCountryCode,"onUpdate:modelValue":g[6]||(g[6]=S=>l(u).phoneCountryCode=S),"popper-style":"--el-bg-color-overlay:rgba(247, 247, 247, 1);--el-border-color-light:rgba(247, 247, 247, 1);--el-text-color-regular:rgba(14, 14, 14, 1);--el-fill-color-light:var(--el-text-color-primary);"},{default:b(()=>[(w(!0),Q(W,null,be(l(F),S=>(w(),ie(ke,{key:S.value,label:S.label,value:S.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),f(J,{modelValue:l(u).vcode,"onUpdate:modelValue":g[8]||(g[8]=S=>l(u).vcode=S),placeholder:"请输入验证码",onKeyup:z(ge,["enter"]),maxlength:6},{prepend:b(()=>[f(B,{size:"20",color:"var(--el-bg-color)"},{default:b(()=>[f(Re)]),_:1})]),append:b(()=>[f(ce,{type:"primary",class:"vcode-button",disabled:l(d),onClick:je},{default:b(()=>[q(Z(l(r).btnText),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"]),f(ce,{color:"var(--el-bg-color)",onClick:ge,class:"x-login-form-login-button",disabled:l(y),loading:l(D)},{default:b(()=>[...g[12]||(g[12]=[v("span",null,"确认",-1)])]),_:1},8,["disabled","loading"])])),v("div",ro,[g[16]||(g[16]=v("span",null,"登录即代表阅读并同意",-1)),f(Qe,{href:"/#/article/user",type:"success",target:"_blank",underline:"never"},{default:b(()=>[...g[14]||(g[14]=[q("《用户协议》",-1)])]),_:1}),g[17]||(g[17]=v("span",null,"和",-1)),f(Qe,{href:"/#/article/privacy",type:"success",target:"_blank",underline:"never"},{default:b(()=>[...g[15]||(g[15]=[q("《隐私政策》",-1)])]),_:1})])])])}}}),lo=j(io,[["__scopeId","data-v-95320374"]]),co=["onClick"],uo=["onUpdate:modelValue","onInput","onKeydown","onFocus"],po={class:"code-char"},mo={key:0,class:"cursor"},ho={class:"flex grid-gap-2 px-8"},go={key:0,class:"flex flex-column flex-y-center grid-gap-4 py-8"},fo={key:1,class:"text-center text-secondary"},_o=Y({__name:"index",emits:["success","close"],setup(o,{emit:e}){const t=te(),{WEBCONFIG:n}=K(t),s=x(!1),a=e,r=x([]),i=x(["","","","","",""]),_=x(0),p=x(!1),m=x(!1),c=X(()=>i.value.every(h=>h.trim()!=="")),u=h=>{_.value=h,ne(()=>{const d=r.value[h];d&&d.focus()})},k=h=>{const d=h.target;if(d.classList.contains("code-input"))return;const C=d.closest(".item");if(C){const y=Array.from(C.parentElement?.children||[]).indexOf(C);y!==-1&&u(y)}},F=(h,d)=>{if(m.value)return;const C=d.target;let y=C.value.toUpperCase().replace(/[^A-Z0-9]/g,"");y.length>1&&(y=y.slice(0,1)),i.value[h]=y,C.value=y,y&&h<5&&ne(()=>{u(h+1)})},E=(h,d)=>{const C=d.key;if(!((d.ctrlKey||d.metaKey)&&C==="v")){if(C==="Backspace")i.value[h]?i.value[h]="":h>0&&(u(h-1),i.value[h-1]=""),d.preventDefault();else if(C==="ArrowLeft"&&h>0)u(h-1),d.preventDefault();else if(C==="ArrowRight"&&h<5)u(h+1),d.preventDefault();else if(C==="Delete")i.value[h]="",d.preventDefault();else if(C.length===1&&/[A-Z0-9]/i.test(C)&&!d.ctrlKey&&!d.metaKey){const y=C.toUpperCase();i.value[h]=y,h<5&&ne(()=>{u(h+1)}),d.preventDefault()}}},D=h=>{h.preventDefault(),h.stopPropagation(),m.value=!0;const d=h.clipboardData?.getData("text")||"";if(!d){m.value=!1;return}const C=d.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,6);if(!C){m.value=!1;return}i.value=["","","","","",""];for(let y=0;y<C.length&&y<6;y++)i.value[y]=C[y];ne(()=>{r.value.forEach((G,N)=>{G&&(G.value=i.value[N]||"")});const y=Math.min(C.length,5);u(y),setTimeout(()=>{m.value=!1},200)})},T=()=>{setTimeout(()=>{const h=document.activeElement;!h||h.classList.contains("code-input")},100)},$=async()=>{if(!c.value){P.warning("请输入完整的邀请码");return}const h=i.value.join("");p.value=!0;try{const d=await R.post("/app/user/api/User/bindInvitationCode",{code:h});d.code===V.SUCCESS?(P.success(d.msg||"邀请码使用成功"),R.get("/app/user/api/User/info").then(C=>{C.code===V.SUCCESS&&(U().setUserInfo(C.data),a("success",C.data))}),setTimeout(()=>{a("close")},500)):P.error(d.msg||"邀请码使用失败")}catch(d){P.error(d?.msg||"邀请码使用失败，请稍后重试")}finally{p.value=!1}},O=h=>{const d=document.activeElement,C=h.target,y=document.querySelector(".content");y&&(d&&y.contains(d)||C&&y.contains(C)||!d&&!C)&&D(h)};return le(()=>{ne(()=>{u(0)}),document.addEventListener("paste",O)}),ye(()=>{document.removeEventListener("paste",O)}),(h,d)=>{const C=Se,y=pe,G=mt;return w(),Q(W,null,[v("div",{class:"grid-columns-6 grid-gap-6 content",onClick:k,onPaste:D},[(w(!0),Q(W,null,be(i.value,(N,M)=>(w(),Q("div",{key:M,class:De(["flex flex-center flex-column item",{active:_.value===M}]),onClick:A=>u(M)},[dt(v("input",{ref_for:!0,ref_key:"inputRefs",ref:r,"onUpdate:modelValue":A=>i.value[M]=A,type:"text",maxlength:"1",class:"code-input",onInput:A=>F(M,A),onKeydown:A=>E(M,A),onPaste:D,onFocus:A=>_.value=M,onBlur:T},null,40,uo),[[pt,i.value[M]]]),v("span",po,Z(N||""),1),_.value===M&&!N?(w(),Q("span",mo)):Ee("",!0)],10,co))),128))],32),v("div",ho,[f(C,{class:"btn",round:"",color:"var(--el-color-white)",size:"large",onClick:d[0]||(d[0]=N=>s.value=!0)},{default:b(()=>[...d[2]||(d[2]=[q(" 申请邀请码 ",-1)])]),_:1}),f(C,{class:"btn",round:"",color:"var(--el-color-success)",size:"large",loading:p.value,disabled:!c.value,onClick:$},{default:b(()=>[...d[3]||(d[3]=[q(" 确定 ",-1)])]),_:1},8,["loading","disabled"])]),f(G,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=N=>s.value=N),title:"加入微信群",width:"512px","align-center":""},{default:b(()=>[l(n)?.wechat_group_qrcode_url?(w(),Q("div",go,[f(y,{src:l(n).wechat_group_qrcode_url,style:{width:"230px",height:"230px"},fit:"contain","preview-src-list":[l(n).wechat_group_qrcode_url],"preview-teleported":""},null,8,["src","preview-src-list"]),d[4]||(d[4]=v("p",{class:"text-center"},"请使用微信扫描下方二维码加入群聊",-1))])):(w(),Q("p",fo,"二维码暂未配置"))]),_:1},8,["modelValue"])],64)}}}),vo=j(_o,[["__scopeId","data-v-39bae0aa"]]),Be=()=>{const o=()=>{const n={showClose:!1,showCancelButton:!1,showConfirmButton:!1,customClass:"x-login-message-box",closeOnPressEscape:!1,closeOnClickModal:!1,message:()=>Ce(lo,{onSuccess:s=>{n.onVanish?.(),(s.data.activation_time==null||s.data.activation_time=="")&&t()},onClose:()=>{console.log("关闭登录"),n.onVanish?.()}})};ue(n).then(()=>{console.log("打开登录成功")}).catch(()=>{console.log("打开登录失败")})},e=()=>{console.log("关闭登录"),ue.close()},t=()=>{const n={showClose:!1,showCancelButton:!1,showConfirmButton:!1,title:"填写邀请码",customStyle:{"--el-messagebox-width":"min(586px,100%)","--el-messagebox-border-radius":"20px","--el-messagebox-padding-primary":"30px"},closeOnPressEscape:!1,closeOnClickModal:!1,message:()=>Ce(vo,{onSuccess:s=>{n.onVanish?.(),console.log("邀请码绑定成功",s)},onClose:()=>{console.log("关闭邀请码"),n.onVanish?.()}})};ue(n).then(()=>{console.log("打开邀请码成功")}).catch(()=>{console.log("打开邀请码失败")})};return{open:o,close:e,openIcode:t}},{t:No}=we.global;let Te=globalThis.location.origin;Te="https://fastmovie.admin.xhadmin.com.cn";const Co=o=>`${Te}/${o}`,ze=()=>{const o={},{hasLogin:e,getToken:t}=U();e()&&(o.Authorization=t());const n=ee();n.get("ICODE")&&(o["X-ICODE"]=n.get("ICODE")),o["X-Platform"]="pc";const s=Ze(),{STATE:a}=K(s),r=a.value.language;return o["Accept-Language"]=r,o.lang=r,o};re.interceptors.request.use(o=>{const e=ze();return Object.keys(e).forEach(t=>{o.headers.set(t,e[t])}),o.baseURL=Te,o.timeout=6e5,o},o=>Promise.reject(o));re.interceptors.response.use(o=>{if(o?.data!==void 0){const e=U();switch(o?.data?.code){case V.NEED_LOGIN:e.clearUserInfo(),Be().open();break;case V.SUCCESS_EVENT_PUSH:o.data.code=V.SUCCESS,o.data.data.event&&(Array.isArray(o.data.data.event)?o.data.data.event.forEach(t=>{Me.emit(t)}):Me.emit(o.data.data.event));break;case V.NO_PERMISSION:Eo(o.data);break}return o.data}},o=>Promise.reject(o));const R={getCompleteUrl:Co,getHeaders:ze,get:re.get,post:re.post,axios:re},bo=(o,e)=>{globalThis.addEventListener(o,t=>{e(t.detail)})},xo=(o,e)=>{globalThis.removeEventListener(o,t=>{e(t.detail)})},yo=(o,e)=>{globalThis.dispatchEvent(new CustomEvent(o,{detail:e}))},Me={on:bo,emit:yo,remove:xo},Eo=o=>{},he=ht({history:gt(),routes:[{path:"/main",name:"main",component:()=>I(()=>import("./control-BWuCLdhF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])),meta:{title:"主页"},redirect:"/",children:[{path:"/",name:"index",component:()=>I(()=>import("./index-Dn84OqVB.js"),__vite__mapDeps([10,1,2,11,6,12,13,14,15,16,17,18,19,7,20,21,22,23])),meta:{title:"首页",menu:"index"}},{path:"/creative",name:"creative",component:()=>I(()=>import("./index-oee-5sMv.js"),__vite__mapDeps([24,1,2])),meta:{title:"创意圈",menu:"creative"}},{path:"/actor",name:"actor",component:()=>I(()=>import("./index-D3qTlVGl.js"),__vite__mapDeps([25,1,2])),meta:{title:"演员库",menu:"actor"}},{path:"/voice",name:"voice",component:()=>I(()=>import("./index-DA2QkzFg.js"),__vite__mapDeps([26,1,2])),meta:{title:"声音库",menu:"voice"}},{path:"/user",name:"user",component:()=>I(()=>import("./index-BLgXCkav.js"),__vite__mapDeps([27,4,1,2,5,14,11,6,12,15,16,20,7,28])),meta:{title:"个人中心",menu:"user"}},{path:"/square",name:"square",component:()=>I(()=>import("./square-DxUTgmYt.js"),__vite__mapDeps([29,1,2,30,31])),meta:{title:"广场",menu:"square"}},{path:"/works/:drama_id",name:"works-detail",component:()=>I(()=>import("./drama-BHCPAYcR.js"),__vite__mapDeps([32,1,2,11,6,12,13,14,15,16,17,33,7,34,35,36,37,38,39])),meta:{title:"短剧详情",menu:"works"},beforeEnter:(o,e,t)=>{const n=U();o.params.drama_id&&n.hasLogin()?t():t({name:"works"})}},{path:"/play/:drama_id/:episode_id",name:"play-detail",component:()=>I(()=>import("./index-CArmc6US.js"),__vite__mapDeps([40,1,2,30,41])),meta:{title:"短剧播放"},beforeEnter:(o,e,t)=>{o.params.drama_id&&o.params.episode_id?t():t({name:"index"})}}]},{path:"/points",name:"points",component:()=>I(()=>import("./points-BFkA76dU.js"),__vite__mapDeps([42,43,1,2,44,6,45])),meta:{title:"积分商城",menu:"points"}},{path:"/code",name:"user-code",component:()=>I(()=>import("./code-CezE5svb.js"),__vite__mapDeps([46,1,2,47])),meta:{title:"邀请码",menu:"user"}},{path:"/vip",name:"vip",component:()=>I(()=>import("./vip-DOgYL8Na.js"),__vite__mapDeps([48,43,1,2,44,49])),meta:{title:"会员中心",menu:"vip"}},{path:"/article/:article",name:"article",component:()=>I(()=>import("./content-DSOg5fHX.js"),__vite__mapDeps([50,1,2])),meta:{title:"文章详情",menu:"article"}},{path:"/generate/:drama_id/:episode_id?",name:"generate",component:()=>I(()=>import("./index-BRdDCF0X.js"),__vite__mapDeps([51,1,2,3,4,5,6,7,8,38,52])),meta:{title:"生成剧本"},redirect:o=>o.params.drama_id&&o.params.episode_id?`/generate/drama/${o.params.drama_id}/${o.params.episode_id}`:"/",children:[{path:"/generate/drama/:drama_id/:episode_id?",name:"generate-drama",component:()=>I(()=>import("./index-79vIc1an.js"),__vite__mapDeps([53,1,2,54,55,11,6,12,56,18,14,15,16,19,57,38,7,58])),meta:{title:"剧本调整"},beforeEnter:(o,e,t)=>{const n=U();!o.params.drama_id||!o.params.episode_id||!n.hasLogin()?t({name:"index"}):t()}},{path:"/generate/actors/:drama_id/:episode_id?",name:"generate-actors",component:()=>I(()=>import("./index-DyMExFVx.js"),__vite__mapDeps([59,33,1,2,11,6,12,14,15,16,7,34,60,57,38,35,61])),meta:{title:"剧本调整"},beforeEnter:(o,e,t)=>{const n=U();!o.params.drama_id||!o.params.episode_id||!n.hasLogin()?t({name:"index"}):t()}},{path:"/generate/props/:drama_id/:episode_id?",name:"generate-props",component:()=>I(()=>import("./index-Bxo-iH4D.js"),__vite__mapDeps([62,1,2,36,11,6,12,15,37,60,57,38,35,7,63])),meta:{title:"剧本调整"},beforeEnter:(o,e,t)=>{const n=U();!o.params.drama_id||!o.params.episode_id||!n.hasLogin()?t({name:"index"}):t()}},{path:"/generate/scene/:drama_id/:episode_id?",name:"generate-scene",component:()=>I(()=>import("./index-6jpe48aS.js"),__vite__mapDeps([64,1,2,54,55,11,6,12,60,57,38,35,7,65])),meta:{title:"剧本调整"},beforeEnter:(o,e,t)=>{const n=U();!o.params.drama_id||!o.params.episode_id||!n.hasLogin()?t({name:"index"}):t()}},{path:"/generate/storyboard/:drama_id/:episode_id?",name:"generate-storyboard",component:()=>I(()=>import("./index-jiPG__hb.js"),__vite__mapDeps([66,1,2,56,18,14,11,6,12,15,16,19,33,7,34,36,37,35,21,22,67])),meta:{title:"剧本调整"},beforeEnter:(o,e,t)=>{const n=U();!o.params.drama_id||!o.params.episode_id||!n.hasLogin()?t({name:"index"}):t()}}]}]}),So=()=>new Promise((o,e)=>{R.get("/app/control/api/Public/config").then(t=>{t.code===V.SUCCESS?(te().setWebConfig(t.data),o(t.data)):e()}).catch(()=>{e()})});he.beforeEach(async(o,e,t)=>{const n=te(),{WEBCONFIG:s}=K(n);n.initWebConfig(),s.value?.web_name||await So().then(()=>{console.log("初始化网站配置成功")}).catch(()=>{console.error("初始化网站配置失败")});const a=U();a.initUserInfo();const{USERINFO:r}=K(a),i=["index","article"];if(!a.hasLogin()&&!i.includes(o.name))return t({name:"index"});if(a.hasLogin()&&!r.value?.activation_time&&o.name!=="user-code"){const{openIcode:_}=Be();setTimeout(()=>{_()},100)}if(a.hasLogin()&&r.value?.activation_time&&o.name==="user-code")return t({name:"index"});t()});he.afterEach((o,e)=>{const{WEBCONFIG:t}=te();if(o.name=="index"){globalThis.document.title=`${t?.web_title}`;return}let n="";t.web_title?n=` - ${t.web_title}`:t.web_name&&(n=` - ${t.web_name}`),globalThis.document.title=`${o.meta?.title}${n}`});const wo=()=>{const o=ee(),e="USERINFO",t=x(),n=()=>t.value!==void 0&&t.value.token!==void 0&&t.value.token!==null&&t.value.token!=="",s=()=>t.value?.token,a=m=>new Promise((c,u)=>{t.value=m,o.set(e,m).then(()=>{n()?c(!0):u("设置用户信息失败")}).catch(()=>{u("设置本地储存失败")})}),r=()=>{Qt(o.getKey(e),m=>{!m||m.newValue===null?t.value=void 0:m.newValue!==null&&he.currentRoute.value.meta.login_access===!0&&i()})},i=()=>{const m=o.get(e);m!==null&&a(m)};return{USERINFO:t,hasLogin:n,setUserInfo:a,initUserInfo:i,userListener:r,clearUserInfo:()=>(t.value=void 0,o.remove(e)),getToken:s,hasPermission:m=>t.value?.is_system||!m?!0:t.value?.permissions===void 0?!1:Array.isArray(m)?m.every(c=>t.value?.permissions?.includes(c)):t.value.permissions.includes(m)}},To=()=>{const o=ee(),e=x({creative_script:[],creative_episode:[],creative_scenes:[],creative_storyboards:[],drama_cover:[],scene_image:[],actor_image:[],actor_three_view_image:[],storyboard_image:[],character_look_costume:[],actor_costume:[],actor_costume_three_view:[],prop_image:[],prop_three_view_image:[],storyboard_video:[],dialogue_voice:[],storyboard_narration_voice:[],storyboard_sfx_voice:[],storyboard_music_voice:[]});return de(()=>e.value,a=>{o.set("MODEL",a,600)},{deep:!0}),{MODEL:e,initModel:()=>{const a=o.get("MODEL");a&&(e.value=a)},setModel:a=>{e.value=a},get:(a,r)=>r?e.value[a].find(i=>i.id===r):e.value[a]||[]}},te=me("webconfig",Tt),Ze=me("state",Lt),U=me("user",wo),Lo=me("model",To),K=o=>ft(o);class ko{_callbacks={};get(e){return this._callbacks[_e(e)]}add(e,t,n){const s=_e(e);this._callbacks[s]=this._callbacks[s]||[],this._callbacks[s].push({fn:t,context:n})}remove(e,t,n){if(!e&&!t&&!n){this._callbacks={};return}const s=e?[_e(e)]:Object.keys(this._callbacks);t||n?this.removeCallback(s,t,n):this.removeAllCallbacks(s)}removeCallback(e,t,n){e.forEach(s=>{this._callbacks[s]=(this._callbacks[s]||[]).filter(a=>t&&t!==a.fn||n&&n!==a.context),this._callbacks[s].length===0&&delete this._callbacks[s]})}removeAllCallbacks(e){e.forEach(t=>{delete this._callbacks[t]})}}class Ke{constructor(e){this.failThrough=e}callbacks=new ko;globalCallbacks=[];on(e,t,n){return this.callbacks.add(e,t,n),this}onGlobal(e){return this.globalCallbacks.push(e),this}off(e,t,n){return this.callbacks.remove(e,t,n),this}emit(e,t){this.globalCallbacks.forEach(s=>s(e,t));const n=this.callbacks.get(e);return n?.length?n.forEach(s=>s.fn.call(s.context||window,t)):this.failThrough&&this.failThrough(e,t),this}}function _e(o){return"_"+o}class Io extends Ke{options;websocket=null;state="initialized";doNotConnect=!1;reconnectInterval=1;reconnectTimer=null;socket_id;constructor(e){super(),this.options=e,this.connect()}updateNetworkState(e){const t=this.state;this.state=e,t!==e&&this.emit("state_change",{previous:t,current:e})}connect(){if(this.doNotConnect=!1,this.state==="connected"){console.log(`networkState is "${this.state}" and do not need connect`);return}this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.closeAndClean();const{url:e,app_key:t,onOpen:n,onMessage:s,onClose:a,onError:r}=this.options,i=new WebSocket(`${e}/app/${t}`);this.updateNetworkState("connecting"),i.onopen=_=>{if(this.reconnectInterval=1,this.doNotConnect){this.updateNetworkState("disconnected"),i.close();return}n?.(_)},s&&(i.onmessage=s),i.onclose=_=>{this.cleanupHandlers(i),this.updateNetworkState("disconnected"),this.doNotConnect||this.waitReconnect(),a?.(_)},i.onerror=_=>{this.close(),this.doNotConnect||this.waitReconnect(),r?.(_)},this.websocket=i}cleanupHandlers(e){e.onmessage=null,e.onopen=null,e.onclose=null,e.onerror=null}closeAndClean(){if(this.websocket){this.cleanupHandlers(this.websocket);try{this.websocket.close()}catch{}this.updateNetworkState("disconnected")}}waitReconnect(){this.state==="connected"||this.state==="connecting"||this.doNotConnect||(this.updateNetworkState("connecting"),this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=window.setTimeout(()=>{this.connect()},this.reconnectInterval),this.reconnectInterval=this.reconnectInterval<1e3?1e3:Math.min(this.reconnectInterval*2,2e3))}send(e){let t=JSON.stringify(e);if(this.state!=="connected"||!this.websocket){console.trace(`networkState is "${this.state}", can not send ${t}`);return}this.websocket.send(t)}close(){this.updateNetworkState("disconnected"),this.websocket?.close()}}class Fe extends Ke{constructor(e,t){super(),this.connection=e,this.channelName=t}subscribed=!1;subscribeCb=null;queue=[];processSubscribe(){this.connection.state==="connected"&&this.subscribeCb?.()}processQueue(){this.connection.state!=="connected"||!this.subscribed||(this.queue.forEach(e=>e()),this.queue=[])}trigger(e,t){if(!e.startsWith("client-"))throw new Error(`Event '${e}' should start with 'client-'`);this.queue.push(()=>{this.connection.send({event:e,data:t,channel:this.channelName})}),this.processQueue()}}class Le{constructor(e){this.config=e,this.config.heartbeat=this.config.heartbeat??25e3,this.config.pingTimeout=this.config.pingTimeout??1e4,Le.instances.push(this),this.createConnection()}static instances=[];pingTimeoutTimer=null;channels={};connection=null;checkoutPing=()=>{setTimeout(()=>{this.connection?.state==="connected"&&(this.connection.send({event:"pusher:ping",data:{}}),this.pingTimeoutTimer&&clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=window.setTimeout(()=>{this.connection?.closeAndClean(),this.connection&&!this.connection.doNotConnect&&this.connection.waitReconnect()},this.config.pingTimeout))},this.config.heartbeat)};subscribe(e){return this.channels[e]?this.channels[e]:e.indexOf("private-")===0?this.createPrivateChannel(e):e.indexOf("presence-")===0?this.createPresenceChannel(e):this.createChannel(e)}createChannel(e){const t=new Fe(this.connection,e);return this.channels[e]=t,t.subscribeCb=()=>{this.connection?.send({event:"pusher:subscribe",data:{channel:e}})},t.processSubscribe(),t}createPrivateChannel(e){let t=new Fe(this.connection,e);return this.channels[e]=t,t.subscribeCb=()=>{this.config.auth&&R.post(this.config.auth,{channel_name:e,socket_id:this.connection.socket_id}).then(n=>{n.code===V.SUCCESS?(n.data.channel=e,this.connection.send({event:"pusher:subscribe",data:n.data})):t.emit("subscription_error",n.msg)}).catch(n=>{t.emit("subscription_error",n.message)})},t.processSubscribe(),t}createPresenceChannel(e){return this.createPrivateChannel(e)}unsubscribe(e){this.channels[e]&&(delete this.channels[e],this.connection?.state==="connected"&&this.connection.send({event:"pusher:unsubscribe",data:{channel:e}}))}unsubscribeAll(){Object.keys(this.channels).forEach(e=>this.unsubscribe(e)),this.channels={}}createConnection(){if(this.connection)throw new Error("Connection already exist");this.connection=new Io({url:this.config.url,app_key:this.config.app_key,onOpen:()=>{this.connection.state="connecting",this.checkoutPing()},onMessage:e=>{this.pingTimeoutTimer&&(clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null);const t=JSON.parse(e.data),{event:n,channel:s}=t;if(n==="pusher:pong"){this.checkoutPing();return}n==="pusher:connection_established"&&(this.connection.socket_id=JSON.parse(t.data).socket_id,this.connection.state="connected",this.subscribeAll());const a=this.channels[s];a&&a.emit(n,JSON.parse(t.data))},onClose:()=>{Object.values(this.channels).forEach(e=>e.subscribed=!1)},onError:()=>{Object.values(this.channels).forEach(e=>e.subscribed=!1)}})}subscribeAll(){this.connection?.state==="connected"&&Object.values(this.channels).forEach(e=>e.processSubscribe())}disconnect(){this.connection&&(this.connection.doNotConnect=!0,this.connection.close())}}const Qo=Y({__name:"App",setup(o){const{locale:e}=Ue(),t=Ze(),{STATE:n}=K(t),s=x(xe);de(()=>n.value.language,T=>{switch(e.value=T,document.documentElement.setAttribute("lang",T),T){case"zh-CN":s.value=xe;break;case"en":s.value=bt;break}});const a=U();a.userListener(),a.initUserInfo();const r=te(),{WEBCONFIG:i}=K(r);r.initWebConfig();const _=Lo();_.initModel();const p=_t(),m=ee();p.query.code&&m.set("ICODE",p.query.code);const{appContext:c}=vt(),u=c.config.globalProperties,k=()=>{if(i.value.push&&!u.$push){const T=location.host;u.$push=new Le({url:T==="short-play-vue.yc.com"?"wss://"+T:i.value.push.url,app_key:i.value.push.app_key,auth:i.value.push.auth})}},F=()=>new Promise((T,$)=>{R.get("/app/user/api/User/info").then(O=>{O.code===V.SUCCESS?(U().setUserInfo(O.data),T(O.data)):$()}).catch(()=>{$()})});a.hasLogin()&&F();const E=()=>{R.get("/app/model/api/Model/models").then(T=>{T.code===V.SUCCESS&&_.setModel(T.data)})},D=()=>{R.get("/app/control/api/Public/config").then(T=>{T.code===V.SUCCESS&&r.setWebConfig(T.data)})};return le(()=>{E(),D();try{k(),de(()=>i.value.push,()=>{k()})}catch{}}),(T,$)=>{const O=ae("router-view"),h=Ct;return w(),ie(h,{locale:l(s)},{default:b(()=>[f(O)]),_:1},8,["locale"])}}}),Po=xt(),oe=yt(Qo);for(const[o,e]of Object.entries(Et))oe.component(o,e);oe.use(St,{locale:xe});oe.use(we);oe.use(Po);oe.use(he);oe.mount("#app");export{R as $,V as R,j as _,te as a,Ze as b,U as c,Be as d,It as e,Fo as f,At as g,Ao as h,Ve as i,Ft as j,ee as k,Lo as l,Do as m,Uo as n,Vo as o,he as r,Ro as s,Mo as t,K as u};
