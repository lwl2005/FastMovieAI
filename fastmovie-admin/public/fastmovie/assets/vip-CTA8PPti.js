import{I as R,a as D,_ as N}from"./icon-close-CG2ijhc2.js";import{d as O,r as o,aw as T,H as U,o as A,ax as H,k as i,l as t,m as a,u as C,K as W,I as S,M as P,p as j,t as r,s as V,h as c,a5 as F,x as K,af as q,C as G,O as J}from"./vendor-CvgTi-PR.js";import{$ as Q,R as X,_ as Y}from"./index-Bz1vQmFt.js";const Z={class:"container"},ee={class:"mt-7"},se={class:"custom-style"},te={class:"content"},ne=["onClick"],oe={class:"h4 font-weight-bold"},le={class:"h10 text-secondary"},ae={class:"flex-1"},re={class:"flex flex-y-baseline grid-gap-4 mt-6"},ie={class:"price-original"},ce={class:"h6 mt-4"},de={class:"h10 text-secondary"},ue=O({__name:"vip",setup(pe){const v=o(null),y=o(null),g=o(null),h=T(),d=o("month"),k=o(null),x=o([]),b={basic:{title:"基础会员",desc:"适合个人创作者轻量编辑"},pro:{title:"高级会员",desc:"适合企业及专业团队使用"}},$=[{label:"按月购买",value:"month"},{label:"按年购买",value:"year"}],E=U(()=>x.value.map(n=>{const e=n.price.find(l=>l.billing_cycle===d.value);return{...n,currentPrice:e}})),z=async()=>{const n=await Q.get("/app/marketing/api/vip/index");if(n.code===X.SUCCESS){const e=["basic","pro"];x.value=n.data.sort((l,m)=>e.indexOf(l.key)-e.indexOf(m.key))}},I=n=>{y.value=n.currentPrice.id,g.value=n.currentPrice.price,J(()=>{v.value?.open()})},u=o(null),p=o(null),w=n=>{const e=window.innerWidth,l=window.innerHeight;return Array.from({length:n},()=>`${Math.random()*e}px ${Math.random()*l}px white`).join(",")},_=()=>{u.value&&(u.value.style.boxShadow=w(50)),p.value&&(p.value.style.boxShadow=w(100))};return A(()=>{_(),window.addEventListener("resize",_),z()}),H(()=>{window.removeEventListener("resize",_)}),(n,e)=>{const l=W,m=F,L=G,M=D;return c(),i("div",Z,[t("div",{class:"stars small",ref_key:"smallStars",ref:p},null,512),t("div",{class:"stars big",ref_key:"bigStars",ref:u},null,512),a(R,{class:"close-btn",onClick:e[0]||(e[0]=s=>C(h).back())}),e[5]||(e[5]=t("div",{class:"h1 font-weight-bold"},"订阅会员畅想更多权益",-1)),t("div",ee,[e[3]||(e[3]=t("span",null,"选择适合你的会员套餐或",-1)),t("span",{class:"text-success cursor-pointer",onClick:e[1]||(e[1]=s=>C(h).push("/points"))}," 充值积分 ")]),t("div",se,[a(l,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=s=>d.value=s),options:$},null,8,["modelValue"])]),t("div",te,[(c(!0),i(S,null,P(E.value,s=>(c(),i("div",{key:s.key,class:j(["item-box",{"item-selected":k.value===s.key}]),onClick:f=>k.value=s.key},[t("div",oe,r(b[s.key].title),1),t("div",le,r(b[s.key].desc),1),t("div",ae,[t("div",re,[a(N,{price:s.currentPrice.price,size:36,"currency-size":22,"decimal-size":36},null,8,["price"]),t("span",ie,r(s.currentPrice.original_price),1)]),t("div",ce," 赠送 "+r(s.currentPrice.points)+" 积分 ",1),t("div",de,r(s.name),1)]),a(m,null,{default:V(()=>[(c(!0),i(S,null,P(s.description.split("|"),(f,B)=>(c(),i("div",{class:"mt-6 text-dark",key:B},r(f),1))),128))]),_:2},1024),a(L,{class:"btn",color:"#ffffff",round:"",onClick:q(f=>I(s),["stop"])},{default:V(()=>[...e[4]||(e[4]=[K(" 订阅计划 ",-1)])]),_:1},8,["onClick"])],10,ne))),128))]),a(M,{ref_key:"payDialogRef",ref:v,type:"vip",id:y.value,price:g.value},null,8,["id","price"])])}}}),ve=Y(ue,[["__scopeId","data-v-16c8b885"]]);export{ve as default};
