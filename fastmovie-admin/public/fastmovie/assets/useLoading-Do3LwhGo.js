import{d as b,r as d,o as T,a as F,k as f,h as c,f as u,l as i,t as o,u as _,e as h,s as B,x as v,C as L,F as P,D}from"./vendor-C6C8mA7k.js";import{_ as E}from"./index-BY2sLTz-.js";const V={class:"xl-loading"},M={key:0,class:"title"},N={key:1,class:"tips text-info"},z={class:"progress-bar mt-10"},O={class:"progress-bar-inner flex flex-center px-4 grid-gap-1 h10"},R={class:"text-success"},S={class:"flex-1"},U={class:"text-title font-weight-600"},X={key:2},j={class:"flex grid-gap-10"},q=b({__name:"index",props:{title:{},tips:{},list:{},auto:{type:Boolean},showCancelButton:{type:Boolean},showConfirmButton:{type:Boolean},cancelButtonText:{},confirmButtonText:{},confirmButtonLoading:{type:Boolean},confirmButtonDisabled:{type:Boolean},confirmButtonClick:{type:Function},cancelButtonClick:{type:Function}},setup(m,{expose:p}){const e=m,a=d(0),l=d(0),t=d(null),r=d("0.00");let g;const C=n=>{r.value=n.toFixed(2)},k=n=>{l.value=n,t.value=e.list?.[n]},y=()=>{l.value=e.list?.findIndex(s=>a.value>=s.start&&a.value<=s.end)||0,t.value=e.list?.[l.value];const n=t.value?.end-t.value?.start,x=(a.value-t.value?.start)/n||0;r.value=(e.list?.filter(s=>a.value>s.end).reduce((s,I)=>s+I.progress,0)+x*t.value?.progress||0).toFixed(2)},w=()=>{g=setInterval(()=>{a.value+=.05,y()},50)};return T(()=>{e.auto&&w()}),F(()=>{clearInterval(g)}),p({setProgress:C,setCurrentIndex:k}),(n,x)=>{const s=L;return c(),f("div",V,[e.title?(c(),f("span",M,o(e.title),1)):u("",!0),e.tips?(c(),f("span",N,o(e.tips),1)):u("",!0),i("div",z,[i("div",O,[i("span",R,o(_(l)+1)+".",1),i("span",S,o(_(t)?.title),1),i("span",U,o(_(r))+"%",1)])]),e.list?.length?(c(),f("span",X,o(_(l)+1)+"/"+o(e.list?.length),1)):u("",!0),i("div",j,[e.showCancelButton?(c(),h(s,{key:0,bg:"",text:"",size:"large",onClick:e.cancelButtonClick},{default:B(()=>[v(o(e.cancelButtonText),1)]),_:1},8,["onClick"])):u("",!0),e.showConfirmButton?(c(),h(s,{key:1,type:"success",size:"large",onClick:e.confirmButtonClick},{default:B(()=>[v(o(e.confirmButtonText),1)]),_:1},8,["onClick"])):u("",!0)])])}}}),A=E(q,[["__scopeId","data-v-4f475889"]]),J=m=>{const p=d(null),e={showClose:!1,showCancelButton:!1,showConfirmButton:!1,customClass:"x-loading-message-box",modalClass:"x-loading-message-box-modal",closeOnPressEscape:!1,closeOnClickModal:!1,message:()=>P(A,{...m,ref:p})};return{open:()=>new Promise(t=>{D(e).then(r=>{console.log("打开loading成功",r)}).catch(()=>{}),t(!0)}),close:()=>{e.onVanish?.()},xlLoadingRef:p}};export{J as u};
