import{k as p,l as t,h as d,d as el,aq as ll,r,z as ge,w as al,o as ol,a as tl,j as w,e as m,f as ve,m as o,s as i,aj as sl,B as nl,u as a,q as il,ae as L,ak as rl,I as C,M as xe,p as j,a7 as dl,x as Q,t as y,am as ul,a4 as pl,ab as cl,ar as X,ah as ml,a5 as _l,C as fl,J as gl,S as vl,E as _,an as xl}from"./vendor-t8h0TCfL.js";import{_ as hl}from"./xl-prop-create-KRM39Wah.js";import{u as he,I as we,_ as wl}from"./usePoints-C21LjXJs.js";import{_ as be,c as Cl,u as yl,$ as h,R as b,r as Ce}from"./index-B0RNcuq8.js";import{I as bl}from"./icon-prev-step-bZW0UvbB.js";import{I as kl}from"./icon-next-step-QYE4O6tF.js";import{I as Sl}from"./icon-batch-CVIIjHri.js";import{I as ye}from"./icon-points-01HE_Clx.js";import{I as Vl}from"./icon-replace-0MVmRYmL.js";import{u as zl}from"./usePush-v4t_r-_Z.js";import"./icon-image-BfHAjLRU.js";const Il={},Pl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",fill:"currentColor",version:"1.1",width:"20",height:"20",viewBox:"0 0 20 20"};function Ll(ke,$){return d(),p("svg",Pl,[...$[0]||($[0]=[t("g",null,[t("rect",{x:"0",y:"0",width:"20",height:"20",rx:"10",fill:"#FFFFFF","fill-opacity":"0.10000000149011612"}),t("path",{d:"M16,8.033267500000001L16,14.886988C16,15.058352,15.965094,15.209154,15.895283,15.337677C15.82547,15.4662,15.747995,15.57416,15.66286,15.659842C15.538561,15.784938,15.412559,15.872334,15.284853,15.923743C15.157148,15.974295,15.026889,16,14.894928,16L5.024193,16C4.72195822,15.992289,4.47676486,15.886899,4.29116711,15.683832C4.10471801,15.480764,4.0076622944,15.242569,4,14.969243L4,8.033267500000001L5.1059241,4.60083795C5.1059241,4.57770371,5.1953175,4.4774555,5.3732529,4.30180699C5.5520396000000005,4.12615843,5.8312876,4.026767112,6.2109966,4.0027760945L13.7881517,4.0027760945C13.8273144,3.98735329,13.9916286,4.036192134,14.282795,4.14929268C14.573962,4.26239318,14.777439,4.52629447,14.894076,4.94013953L16,8.033267500000001ZM14.556936,7.1781588L13.8698835,5.1166449L6.0483861,5.1166449L5.4430648,7.1781588L14.556936,7.1781588ZM12.2812347,12.3387985C12.4327784,12.1862831,12.5085497,11.9797902,12.5085497,11.7176023C12.5085497,11.456270700000001,12.4327784,11.24892,12.2812347,11.0964055C12.1296921,10.9438906,11.921958400000001,10.8642073,11.6588864,10.8564954L8.2602344,10.8564954C7.9963107,10.8642073,7.7885776,10.9447484,7.637886,11.0964055C7.4871943000000005,11.2480631,7.4105711,11.455413799999999,7.4105711,11.7176023C7.4105711,11.9789329,7.4863429,12.1862831,7.637886,12.3387985C7.7894289,12.491313,7.9963107,12.5675707,8.2602344,12.5675707L11.6588864,12.5675707C11.921958400000001,12.5667133,12.1296921,12.491313,12.2812347,12.3387985Z",fill:"currentColor","fill-opacity":"1",style:{"mix-blend-mode":"passthrough"}})],-1)])])}const Rl=be(Il,[["render",Ll]]),El={class:"flex flex-column draw-module"},Ul={class:"flex-1 flex grid-gap-10 overflow-hidden"},Fl={class:"flex-1 flex flex-column grid-gap-4 overflow-hidden"},$l={class:"grid-columns-xxl-7 grid-columns-xl-6 grid-columns-lg-5 grid-columns-md-4 grid-columns-sm-3 grid-columns-xs-2 grid-columns-p-1 grid-gap-4"},Bl=["onClick"],Ml=["onClick"],Dl={class:"flex grid-gap-2 prop-status"},Gl={class:"flex flex-column flex-y-flex-end grid-gap-2"},Al={class:"flex flex-column grid-gap-2 prop-info"},ql=["onClick"],Nl={class:"prop-form-wrapper bg-overlay border rounded-4 prop-form flex flex-column grid-gap-4"},Tl={class:"border-bottom flex flex-center"},jl={class:"flex flex-column grid-gap-2 px-4"},Zl={class:"bg rounded-4 p-4 border"},Hl={class:"flex flex-y-center grid-gap-2"},Jl={class:"h10 text-ellipsis-1",style:{"max-width":"60px"}},Ol={class:"h10 text-ellipsis-1",style:{"max-width":"60px"}},Wl={class:"bg-overlay rounded-round p-3 flex flex-center grid-gap-2 pointer hover-bg-hover"},Kl={class:"flex flex-center grid-gap-2"},Ql={class:"h10"},Xl={key:0,class:"grid-columns-2 grid-gap-4 p-4"},Yl=["onClick"],ea={class:"p-4 w-100 flex grid-gap-4 flex-center"},la={class:"flex grid-gap-10"},aa={class:"flex flex-center grid-gap-2"},oa={class:"h10"},ta=el({__name:"index",emits:["update:drama"],setup(ke,{emit:$}){const k=ll(),Se=Cl(),{USERINFO:Y}=yl(Se),S=r(k.params.drama_id),B=r(k.params.episode_id),Ve=$,ee=r({}),ze=()=>{S.value&&h.get("/app/shortplay/api/Works/details",{params:{id:S.value}}).then(l=>{l.code===b.SUCCESS?(ee.value=l.data,Ve("update:drama",ee.value)):_.error(l.msg)}).catch(()=>{_.error("获取短剧详情失败")})},f=ge({type:"episode",name:"",prop_id:"",drama_id:S.value,episode_id:B.value}),g=r([]),le=r(!1),V=r(null),c=r(),n=r({prop_id:"",drama_id:S.value,episode_id:B.value,name:"",description:"",image_model_id:null,three_view_model_id:null,image_state:!1,three_view_image_state:!1,image_reference_state:!1,reference_image:"",image:"",three_view_image:""});al(g,()=>{try{const l=g.value.find(e=>e.id===c.value?.id);if(l)G(l);else{const e=g.value[0];e?G(e):(c.value=void 0,n.value={id:"",drama_id:S.value,episode_id:B.value,name:"",description:"",image_model_id:null,three_view_model_id:null,image_state:!1,three_view_image_state:!1,image_reference_state:!1,reference_image:"",image:"",three_view_image:""})}}catch(l){console.error("watch propList error",l)}});const z=()=>{le.value=!0,h.get("/app/shortplay/api/Prop/index",{params:f}).then(l=>{l.code===b.SUCCESS&&(g.value=l.data)}).catch(l=>{console.error("getPropList error",l)}).finally(()=>{le.value=!1})},ae=r(!1),Ie=r([]),M=r([]),oe=r(!1),te=ge({alias_id:"",scene:"prop_image",page:1,page_size:100});let D=null;const Pe=()=>{D&&D.abort(),D=new AbortController,oe.value=!0,M.value=[],h.get("/app/model/api/Task/index",{params:te,signal:D?.signal}).then(l=>{l.code===b.SUCCESS&&(M.value=l.data.data)}).finally(()=>{oe.value=!1})},G=l=>{c.value=l,n.value.id=l.id,n.value.name=l.name,n.value.description=l.description,n.value.image=l.image,n.value.three_view_image=l.three_view_image,n.value.image_reference_state=!1,n.value.reference_image="",te.alias_id=l.id,Pe()},se=r(null),ne=r(null),v=r({}),Z=l=>{l?(v.value=l,n.value.image_state=!0):(v.value={},n.value.image_model_id=null,n.value.image_state=!1),se.value?.hide()},ie=r(null),re=r(null),x=r({}),H=l=>{l?(x.value=l,n.value.three_view_image_state=!0):(x.value={},n.value.three_view_model_id=null,n.value.three_view_image_state=!1),ie.value?.hide()},Le=he([v,x]),A=r(!1),Re=()=>{if(!(A.value||c.value.status_enum.value==="pending")){if(!n.value.image_model_id&&!n.value.three_view_model_id){_.error("请先选择物品图模型或三视图模型");return}A.value=!0,h.post("/app/shortplay/api/Prop/initializing",{...n.value,image:"",three_view_image:""}).then(l=>{l.code===b.SUCCESS?(c.value.status=l.data.status,c.value.status_enum=l.data.status_enum):_.error(l.msg)}).catch(()=>{_.error("生成图片失败")}).finally(()=>{A.value=!1})}},J=r(null),I=r(!1),Ee=l=>{I.value=!1,l.code===b.SUCCESS?(n.value.image_reference_state=!0,n.value.reference_image=l.data.url):_.error(l.msg),J.value?.clearFiles()},Ue=()=>{I.value=!1,J.value?.clearFiles()},q=r(!1),Fe=l=>{q.value||(q.value=!0,h.post("/app/shortplay/api/Prop/ReplaceProp",{id:c.value.id,task_id:l.id}).then(e=>{e.code===b.SUCCESS?(c.value.image=l.result.image_path,c.value.status=e.data.status,c.value.status_enum=e.data.status_enum,n.value.image=l.result.image_path):_.error(e.msg)}).catch(()=>{_.error("替换物品失败")}).finally(()=>{q.value=!1}))},P=r(!1),N=r(!1),de=r(0),O=r([]),$e=()=>{P.value=!0,O.value=g.value.filter(l=>l.status==="initializing"),de.value=O.value.length},Be=he([v,x],de),Me=()=>{N.value=!0,Promise.all(O.value.map(l=>h.post("/app/shortplay/api/Prop/initializing",{id:l.id,image_reference_state:!!l.image,reference_image:l.image?l.image:"",image_state:!0,three_view_image_state:!0,image_model_id:v.value.id,three_view_model_id:x.value.id}))).then(()=>{z()}).catch(l=>{console.error("submitBatchGenerate error",l)}).finally(()=>{N.value=!1,P.value=!1})},De=l=>{h.post("/app/shortplay/api/Prop/delete",{id:l.id,drama_id:S.value,episode_id:B.value}).then(e=>{e.code===b.SUCCESS?(_.success(e.msg),z()):_.error(e.msg)})},{subscribe:ue,unsubscribeAll:Ge}=zl(),Ae=()=>{ue("private-generatepropimage-"+Y.value?.user,l=>{console.log("channels complete info message",l);const e=g.value.find(R=>R.id===l.id);e&&(e.status_enum=l.status,l.image&&(e.image=l.image)),V.value?.subscribe?.("generatepropimage",l)}),ue("private-generatepropthreeviewimage-"+Y.value?.user,l=>{console.log("channels complete info message",l);const e=g.value.find(R=>R.id===l.id);e&&(e.status_enum=l.status,l.image&&(e.three_view_image=l.image)),V.value?.subscribe?.("generatepropthreeviewimage",l)})},qe=()=>{Ce.push(`/generate/actors/${k.params.drama_id}/${k.params.episode_id}`)},Ne=()=>{Ce.push(`/generate/scene/${k.params.drama_id}/${k.params.episode_id}`)};return ol(()=>{z(),ze(),Ae()}),tl(()=>{console.log("props unmounted"),Ge()}),(l,e)=>{const R=w("Search"),u=il,W=nl,Te=sl,je=rl,pe=w("Plus"),E=dl,Ze=w("UploadFilled"),He=w("Delete"),Je=ul,ce=pl,me=w("Close"),_e=w("ArrowDown"),Oe=w("PictureRounded"),K=cl,We=ml,Ke=w("Top"),T=wl,fe=_l,U=fl,Qe=xl,Xe=hl,Ye=vl;return d(),p("div",El,[t("div",Ul,[t("div",Fl,[o(je,{class:"flex flex-center grid-gap-4",onSubmit:L(z,["prevent"])},{default:i(()=>[o(Te,{class:"mb-0"},{default:i(()=>[o(W,{modelValue:a(f).name,"onUpdate:modelValue":e[0]||(e[0]=s=>a(f).name=s),placeholder:"搜索物品",clearable:"",onChange:z},{suffix:i(()=>[o(u,null,{default:i(()=>[o(R)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e[14]||(e[14]=t("div",{class:"flex-1"},null,-1))]),_:1}),o(ce,{class:"flex-1"},{default:i(()=>[t("div",$l,[t("div",{class:"grid-column-1 rounded-4 p-4 prop-item flex flex-column flex-center grid-gap-4 pointer bg-overlay",onClick:e[1]||(e[1]=s=>a(V)?.open?.(null,a(f).drama_id,a(f).episode_id))},[o(u,{class:"rounded-4",size:"20",style:{height:"40px",width:"40px","background-color":"var(--el-fill-color-dark)"}},{default:i(()=>[o(pe)]),_:1}),e[15]||(e[15]=t("span",null,"添加物品",-1))]),(d(!0),p(C,null,xe(a(g),s=>(d(),p("div",{class:j(["grid-column-1 input-button rounded-4 flex flex-column flex-center grid-gap-2 prop-item bg-overlay border",{"border-success":s.id===a(n).id}]),key:s.id},[o(E,{src:s.image,class:j(["prop-avatar bg-mosaic",{pointer:s.image}]),onClick:F=>G(s),fit:"cover"},{default:i(()=>[Q(y(s.name),1)]),_:2},1032,["src","class","onClick"]),t("div",{class:"prop-edit-mask flex flex-column grid-gap-4 flex-center pointer",onClick:F=>G(s)},[t("div",{class:"flex flex-center bg-overlay rounded-round p-2 pointer grid-gap-2",onClick:L(F=>a(V)?.upload?.(s,a(f).drama_id,a(f).episode_id),["stop"])},[o(u,{size:"16"},{default:i(()=>[o(Ze)]),_:1}),e[16]||(e[16]=t("span",{class:"h10"},"手动上传",-1))],8,Ml),o(Je,{title:"确定删除该物品吗？",width:"fit-content",onConfirm:F=>De(s),placement:"bottom-end"},{reference:i(()=>[t("div",{class:"flex flex-center bg-overlay rounded-round p-2 pointer grid-gap-2",onClick:e[2]||(e[2]=L(()=>{},["stop"]))},[o(u,{size:"16"},{default:i(()=>[o(He)]),_:1}),e[17]||(e[17]=t("span",{class:"h10"},"删除物品",-1))])]),_:1},8,["onConfirm"])],8,Bl),t("div",Dl,[e[18]||(e[18]=t("div",{class:"flex-1"},null,-1)),t("div",Gl,[t("span",{class:j(["prop-tag",["prop-tag--"+s.status_enum.props.type]])},y(s.status_enum.label),3)])]),t("div",Al,[t("div",{class:j(["prop-name flex flex-center grid-gap-1 pointer",{"prop-name--success":s.id===a(n).id}]),onClick:L(F=>a(V)?.open?.(s,a(f).drama_id,a(f).episode_id),["stop"])},[o(u,{size:"16"},{default:i(()=>[o(Rl)]),_:1}),t("span",null,y(s.name),1)],10,ql)])],2))),128))])]),_:1})]),t("div",Nl,[a(n).id?(d(),p(C,{key:0},[t("div",Tl,[o(W,{modelValue:a(n).name,"onUpdate:modelValue":e[3]||(e[3]=s=>a(n).name=s),placeholder:"物品物品",size:"large",class:"prop-form-input flex-1"},null,8,["modelValue"])]),t("div",jl,[e[22]||(e[22]=t("span",null,"物品描述",-1)),t("div",Zl,[o(W,{modelValue:a(n).description,"onUpdate:modelValue":e[4]||(e[4]=s=>a(n).description=s),placeholder:"请输入物品描述",size:"small",class:"prop-form-textarea",type:"textarea",autosize:{minRows:6,maxRows:20}},null,8,["modelValue"]),t("div",Hl,[t("div",{class:"bg-overlay rounded-round p-3 flex flex-center grid-gap-2 pointer hover-bg-hover",ref_key:"modelButtonRef",ref:ne,title:"选择使用AI生成图"},[a(v).id?(d(),p(C,{key:0},[o(E,{src:a(v).icon,alt:a(v).name,shape:"square",size:16},null,8,["src","alt"]),t("span",Jl,y(a(v).name),1),o(u,{size:"16",class:"pointer",onClick:e[5]||(e[5]=L(s=>Z(),["stop"]))},{default:i(()=>[o(me)]),_:1})],64)):(d(),p(C,{key:1},[o(u,{size:"16"},{default:i(()=>[o(we)]),_:1}),e[19]||(e[19]=t("span",{class:"h10"},"物品图",-1)),o(u,{size:"16"},{default:i(()=>[o(_e)]),_:1})],64))],512),t("div",{class:"bg-overlay rounded-round p-3 flex flex-center grid-gap-2 pointer hover-bg-hover",ref_key:"threeViewModelButtonRef",ref:re,title:"选择使用AI生成三视图"},[a(x).id?(d(),p(C,{key:0},[o(E,{src:a(x).icon,alt:a(x).name,shape:"square",size:16},null,8,["src","alt"]),t("span",Ol,y(a(x).name),1),o(u,{size:"16",class:"pointer",onClick:e[6]||(e[6]=L(s=>H(),["stop"]))},{default:i(()=>[o(me)]),_:1})],64)):(d(),p(C,{key:1},[o(u,{size:"16"},{default:i(()=>[o(we)]),_:1}),e[20]||(e[20]=t("span",{class:"h10"},"三视图",-1)),o(u,{size:"16"},{default:i(()=>[o(_e)]),_:1})],64))],512),o(We,{ref_key:"uploadImageRef",ref:J,title:"添加参考图",data:{dir_name:"prop/reference",dir_title:"物品参考照片"},action:a(h).getCompleteUrl("app/shortplay/api/Uploads/upload"),headers:a(h).getHeaders(),accept:"image/jpeg,image/png",limit:1,type:"cover",disabled:a(I),"before-upload":()=>(I.value=!0,!0),"on-success":Ee,"show-file-list":!1,"on-error":Ue},{default:i(()=>[t("div",Wl,[o(K,{placement:"top",disabled:!a(n).reference_image,width:"fit-content"},{reference:i(()=>[!a(n).reference_image||a(I)?(d(),m(u,{key:0,size:"16"},{default:i(()=>[a(I)?(d(),m(a(X),{key:0,class:"circular"})):(d(),m(pe,{key:1}))]),_:1})):(d(),m(u,{key:1,size:"16",color:"var(--el-color-success)"},{default:i(()=>[o(Oe)]),_:1}))]),default:i(()=>[o(E,{src:a(n).reference_image,fit:"contain",size:130,shape:"square"},null,8,["src"])]),_:1},8,["disabled"])])]),_:1},8,["action","headers","disabled","before-upload"]),e[21]||(e[21]=t("div",{class:"flex-1"},null,-1)),t("div",Kl,[o(u,{size:"16"},{default:i(()=>[o(ye)]),_:1}),t("span",Ql,y(a(Le)),1)]),t("div",{class:"rounded-round p-3 flex flex-center grid-gap-2 pointer",style:{"background-color":"#FFFFFF",color:"#141414"},onClick:Re},[o(u,{size:"20"},{default:i(()=>[a(A)||a(c).status_enum.value==="pending"?(d(),m(a(X),{key:0,class:"circular"})):(d(),m(Ke,{key:1}))]),_:1})])])])]),o(K,{ref_key:"modelPopoverRef",ref:se,"popper-class":"model-popover","virtual-ref":a(ne),"virtual-triggering":"",placement:"bottom",width:"min(100vw,380px)",trigger:"click"},{default:i(()=>[o(T,{modelValue:a(n).image_model_id,"onUpdate:modelValue":e[7]||(e[7]=s=>a(n).image_model_id=s),onSelect:Z,"no-init":"",scene:"prop_image"},null,8,["modelValue"])]),_:1},8,["virtual-ref"]),o(K,{ref_key:"threeViewModelPopoverRef",ref:ie,"popper-class":"model-popover","virtual-ref":a(re),"virtual-triggering":"",placement:"bottom",width:"min(100vw,380px)",trigger:"click"},{default:i(()=>[o(T,{modelValue:a(n).three_view_model_id,"onUpdate:modelValue":e[8]||(e[8]=s=>a(n).three_view_model_id=s),onSelect:H,"no-init":"",scene:"prop_three_view_image"},null,8,["modelValue"])]),_:1},8,["virtual-ref"]),e[24]||(e[24]=t("div",{class:"flex flex-column grid-gap-2 px-4 pt-4"},[t("span",null,"物品原始记录")],-1)),o(ce,{class:"flex-1"},{default:i(()=>[a(M).length>0?(d(),p("div",Xl,[(d(!0),p(C,null,xe(a(M),s=>(d(),p("div",{class:"grid-column-1 task-item",key:s.id},[o(E,{src:s.result.image_path,fit:"contain",shape:"square",size:206},null,8,["src"]),s.status==="success"&&s.result.image_path!==a(n).image?(d(),p("div",{key:0,class:"flex flex-center grid-gap-2 task-item-replace pointer",onClick:F=>Fe(s)},[o(u,null,{default:i(()=>[a(q)?(d(),m(a(X),{key:0,class:"circular"})):(d(),m(Vl,{key:1}))]),_:1}),e[23]||(e[23]=t("span",{class:"h10 text-nowrap"},"替换原始",-1))],8,Yl)):ve("",!0)]))),128))])):(d(),m(fe,{key:1,description:"暂无原始记录"}))]),_:1})],64)):(d(),m(fe,{key:1,description:"点击物品名称选择物品"}))])]),t("div",ea,[o(U,{bg:"",text:"",size:"large",onClick:qe},{default:i(()=>[o(u,{size:"16"},{default:i(()=>[o(bl)]),_:1}),e[25]||(e[25]=t("span",null,"上一步",-1))]),_:1}),o(U,{type:"success",size:"large",disabled:a(g).filter(s=>s.status==="initializing").length<=0,onClick:$e},{default:i(()=>[o(u,{size:"16"},{default:i(()=>[o(Sl)]),_:1}),e[26]||(e[26]=t("span",null,"批量生成",-1))]),_:1},8,["disabled"]),o(U,{type:"success",size:"large",onClick:Ne},{default:i(()=>[e[27]||(e[27]=t("span",null,"下一步",-1)),o(u,{size:"16",class:"ml-2"},{default:i(()=>[o(kl)]),_:1})]),_:1})]),a(ae)?(d(),m(Qe,{key:0,"url-list":a(Ie),onClose:e[9]||(e[9]=s=>ae.value=!1)},null,8,["url-list"])):ve("",!0),o(Xe,{ref_key:"propCreateRef",ref:V,onSuccess:z},null,512),o(Ye,{modelValue:a(P),"onUpdate:modelValue":e[13]||(e[13]=s=>gl(P)?P.value=s:null),class:"generate-storyboard-dialog",draggable:"",width:"800px"},{header:i(()=>[...e[28]||(e[28]=[t("span",{class:"font-weight-600"},"批量生成物品",-1)])]),footer:i(()=>[o(U,{type:"info",onClick:e[12]||(e[12]=s=>P.value=!1),disabled:a(N)},{default:i(()=>[...e[29]||(e[29]=[Q("取消",-1)])]),_:1},8,["disabled"]),e[31]||(e[31]=t("div",{class:"flex-1"},null,-1)),t("div",aa,[o(u,{size:"16"},{default:i(()=>[o(ye)]),_:1}),t("span",oa,y(a(Be)),1)]),o(U,{type:"success",icon:"Check",onClick:Me,disabled:!a(n).image_model_id||!a(n).three_view_model_id,loading:a(N)},{default:i(()=>[...e[30]||(e[30]=[Q("生成",-1)])]),_:1},8,["disabled","loading"])]),default:i(()=>[t("div",la,[o(T,{title:"模型",modelValue:a(n).image_model_id,"onUpdate:modelValue":e[10]||(e[10]=s=>a(n).image_model_id=s),onSelect:Z,"no-init":"",class:"flex-1 bg-overlay rounded-4 p-4",scene:"prop_image"},null,8,["modelValue"]),o(T,{title:"三视图模型",modelValue:a(n).three_view_model_id,"onUpdate:modelValue":e[11]||(e[11]=s=>a(n).three_view_model_id=s),onSelect:H,class:"flex-1 bg-overlay rounded-4 p-4","no-init":"",scene:"prop_three_view_image"},null,8,["modelValue"])])]),_:1},8,["modelValue"])])}}}),ga=be(ta,[["__scopeId","data-v-dcd9ddae"]]);export{ga as default};
